MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001         Processor 16F914
                      00002 
                      00003 #include P16F914.inc   
                      00001         LIST
                      00002 ; P16F914.INC  Standard Header File, Version 1.00    Microchip Technology, Inc.
                      00842         LIST
                      00004 ;******************************************************************
                      00005 ; History
                      00006 ;******************************************************************
                      00007 ; Version 1.21  03.10.2005 Ga
                      00008 ; - Gateway für PC eingebaut
                      00009  
                      00010 ; Version 1.22  05.10.2005 Ga
                      00011 ; - Rundungsfehler (?) beseitigt, zählte bei hohen Farbunterschieden immer +2 bzw -2
                      00012 
                      00013 ; Version 1.23  10.10.2005 Ga
                      00014 ; - Default-Programm in Wahlschalterstellung 1 (Wiedergabe-Modus) ist jetzt Programm 4,
                      00015 ;   das individuelle erstellte Farbverlaufprogramm 
                      00016 ; - Fehler im Wiedergabemodus nach Reset (kein automatischer Anlauf) beseitigt
                      00017 
                      00018 ;******************************************************************
                      00019 ; Definitions
                      00020 ;******************************************************************
                      00021 ;
                      00022 
                      00023 ;------------------------------------------------------------------
                      00024 ; Register Definitions
                      00025 ;
  00000021            00026 PCLATH_TEMP     equ     0x21 ; Stack für PLATH-Register
                      00027 
  00000022            00028 TIM1_10MS       equ     0x22
  00000023            00029 TIM2_10MS       equ     0x23
                      00030 
  00000024            00031 AD0                             equ     0x24    ; Rot
  00000025            00032 AD1                             equ     0x25    ; Grün
  00000026            00033 AD2                             equ     0x26    ; Blau
  00000027            00034 AD3                             equ     0x27    ; Speed
                      00035 
                      00036 
  00000028            00037 TASTE_AKT               equ     0x28    ; aktuell gedrückte Taste, Bit 7 = 1 wenn 
                      00038                                                         ; Drücken entdeckt, bei Repeat Bit 6=1
  00000029            00039 TASTE_LAST              equ     0x29    ; zuletzt gedrückte Taste
  0000002A            00040 TASTE_IDX               equ     0x2a    ; Wert, der 10%, 30%, 40% usw in eine Zahl 0,1,2 usw wandelt
                      00041                                                         ; wird von TAST_DISPATCH beschrieben
                      00042 
                      00043 
  0000002B            00044 TEMP                    equ 0x2b        ; temporäre Speicherplatz, nur in einem
                      00045                                         ; call geschützt
                      00046 
  0000002C            00047 TEMP1                   equ 0x2c
  0000002D            00048 TEMP2                   equ 0x2d
                      00049 
  0000002E            00050 SEKUNDEN_WERT           equ 0x2e        ; Zeit bis zum nöchsten Farbtripel aus Tabelle
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000002F            00051 SEKUNDEN_COUNT          equ 0x2f        ; Zeit bis zum nöchsten Farbtripel aus Tabelle
                      00052 
  00000030            00053 DISP_CNT                equ     0x30    ; enthält die ANzahl auf Disp zu schreibende Zeichen
  00000031            00054 DISP_Z_FLAG             equ     0x31    ; Bit0-> Zeile 1
                      00055                                                         ; Bit1-> Zeile 2 usw.
  00000032            00056 DISP_STAT               equ     0x32    ; Bit3-> DisplayAusgabe steht an
                      00057 
  00000033            00058 ACC1_0                  equ     0x33    ;Rechenregister
  00000034            00059 ACC1_H                  equ     0x34    ;Rechenregister
  00000035            00060 ACC1_L                  equ     0x35
                      00061 
  00000036            00062 ACC2_0                  equ     0x36    ;Rechenregister
  00000037            00063 ACC2_H                  equ     0x37
  00000038            00064 ACC2_L                  equ     0x38
                      00065 
  00000039            00066 TEMPFLAG                equ     0x39    ; Temporäres Bitregister
                      00067 
  0000003A            00068 DELAY                   equ     0x3a
                      00069                                                         ; Bit6-> Anzeige On/Off 
  0000003B            00070 TEMP3                   equ     0x3b
  0000003C            00071 TEMP4                   equ     0x3c
  0000003D            00072 TEMP5                   equ     0x3d
  0000003F            00073 AD_STATUS               equ 0x3f        ; Bit 0-2 --> Neuer AD-Wert Kanal 0-2
                      00074 
  000000A0            00075 FARBTAB                 equ 0xA0        ; 5 Farbtripel zum anfahren + Zeit
                      00076                                         ; !!!! Registerbank 1 !!!
  00000040            00077 TASTBUFF                equ 0x40
                      00078 
  00000050            00079 DISP_BUFF               equ     0x50    ; Display Buffer, 16 chars!!
                      00080 
  00000060            00081 ITOA_BUFF               equ     0x60    ; Achtung!! 6 Bytes lang!!!!
                      00082 
  00000066            00083 TIMECOUNT               equ     0x66
  00000068            00084 HEX_AKT                 equ     0x68    ; Bit 0-3-> aktuelle Hex-Schalter Stellung
  00000069            00085 HEX_LAST                equ     0x69    ; Bit 7=1-> Schalterstellung geändert
                      00086 
  0000006A            00087 FARB_IDX_AKT            equ     0x6a
  0000006B            00088 FARB_IDX_NEXT           equ     0x6b
  0000006C            00089 FARB_COUNT              equ     0x6c
  0000006D            00090 FARB_SPEICHER_IDX       equ     0x6d
  0000006E            00091 TASTBUFF_IDX            equ     0x6e
  0000006F            00092 RX_COUNT                        equ     0x6f
  0000007E            00093 W_TEMP                  equ     0x7e ; Stack für W-register im Interrupt
  0000007F            00094 STATUS_TEMP             equ     0x7f ; stack für STATUS im Interrupt
                      00095 
                      00096 
                      00097 
                      00098 ;===================================
  00000006            00099 PORT_TASTOUT            equ     PORTB   ; TastaturSCan Out
  00000008            00100 PORT_TASTIN             equ     PORTD   ; TastaturScan IN
  00000003            00101 ETX                     equ 0x3
  00000002            00102 STX                     equ 0x2
                      00103 
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00104 
                      00105 
                      00106 ;16F914-Configs---------------------------------------------------------------------
                      00107 ;       __IDLOCS        H'3012' ;       User ID
                      00108 ;-----------------------------------------------------------------------------------
                      00109 ;16F914 ************************************************************************
                      00110 ;       __CONFIG  B'10000011100010'             ;zum debuggen
2007   3022           00111         __CONFIG  B'11000000100010'             
                      00112 ;                   ||||||||||||||
                      00113 ;                   |||||||||||+++---FOSC 111=RC R+C an RA5, RA4=CLKOUT
                      00114 ;                   |||||||||||+++---FOSC 110=RC R+C an RA5
                      00115 ;                   |||||||||||+++---FOSC 101=INTOSC RA4=CLKOUT
                      00116 ;                   |||||||||||+++---FOSC 100=INTOSC RA4, RA5 = I/O
                      00117 ;                   |||||||||||+++---FOSC 011=EC
                      00118 ;                   |||||||||||+++---FOSC 010=HS
                      00119 ;                   |||||||||||+++---FOSC 001=XT
                      00120 ;                   |||||||||||+++---FOSC 000=LP
                      00121 ;                   |||||||||||     
                      00122 ;                   ||||||||||+------WDTE 0=disa 1=ena
                      00123 ;                   |||||||||+-------PWRT 0=ena  1=disa
                      00124 ;                   ||||||||+--------MCLR 0=din  1=ena
                      00125 ;                   |||||||+---------CP  ROM 0=CPena 1=CPdis
                      00126 ;                   ||||||+----------CPD RAM 0=CPena 1=CPdis
                      00127 ;                   ||||++-----------BOR 00=BOR disabled
                      00128 ;                   ||||++-----------BOR 01=BOR controlled by SBOREN
                      00129 ;                   ||||++-----------BOR 10=BOR enabled: operation dis.: sleep
                      00130 ;                   ||||++-----------BOR 11=BOR enabled
                      00131 ;                   |||+-------------IESO 0=dis   1=ena
                      00132 ;                   ||+--------------FCMEN 0=dis  1=ena
                      00133 ;                   |+---------------DEBUG 0=ena  1=dis
                      00134 ;
                      00135 ;***************************************************************
                      00136 ;
                      00137         IFNDEF __16F914
                      00138            MESSG "Eingestellter Prozessor ist nicht 16F914 - Überprüfe Einstellungen"
                      00139         ENDIF
                      00140 ;=============================================================================================
                      00141 ; PROGRAMM
                      00142 ;=============================================================================================
0000                  00143         org     000
                      00144 ;RST CODE 0x0
0000   018A           00145         clrf PCLATH
                      00146 
                      00147 
                      00148 ;,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0001   282A           00149         goto    start
                      00150 
                      00151 ;=============================================================================================
                      00152 ; ISR
                      00153 ;=============================================================================================
                      00154 
                      00155 ;=============================================================================================
                      00156 ;IV CODE 0x4
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0004                  00157         org     004
0004   2808           00158         goto    Interrupt               
                      00159 
                      00160 ; ****************************************************************************
                      00161 
                      00162 ;TAB CODE 0x8
0008                  00163         org     008
                      00164 
0008                  00165 Interrupt
                      00166 
0008   00FE           00167         movwf   W_TEMP          ; Accu sichern
0009   0E03           00168         swapf   STATUS,W        ; Status nach Accu laden
000A   0183           00169         clrf    STATUS          ; nach Bank 0 umschalten
000B   00FF           00170         movwf   STATUS_TEMP     ; Status im Temp-Register ablegen
                      00171 
000C   080A           00172         movfw   PCLATH
000D   00A1           00173         movwf   PCLATH_TEMP
000E   018A           00174         clrf    PCLATH
                      00175 
000F   1283           00176         bcf     STATUS,RP0
0010   1303           00177         bcf     STATUS,RP1
                      00178 
                      00179 
0011   188C           00180         btfsc   PIR1, TMR2IF
0012   2819           00181         goto    Timer2Int
0013   180C           00182         btfsc   PIR1, TMR1IF
0014   2816           00183         goto    Timer1Int
0015   2823           00184         goto    EndInt
                      00185 
                      00186 ;---------------------------------------        
0016                  00187 Timer1Int                       ; PWM-Timer
                      00188 
                      00189 
0016                  00190 EndTimer1Int
0016   100C           00191         bcf             PIR1, TMR1IF
0017   1410           00192         bsf             T1CON,  TMR1ON
0018   2823           00193         goto    EndInt
                      00194 ;----------------------------------------
0019                  00195 Timer2Int                       ; 10msec-Timer
0019   1407           00196         bsf     PORTC,0
001A   108C           00197         bcf             PIR1,TMR2IF
001B   08A2           00198         movf    TIM1_10MS,F             ; TEst auf 0
001C   1D03           00199         btfss   STATUS,Z
001D   03A2           00200         decf    TIM1_10MS,F
                      00201 
001E   08A3           00202         movf    TIM2_10MS,F             ; TEst auf 0
001F   1D03           00203         btfss   STATUS,Z
0020   03A3           00204         decf    TIM2_10MS,F
0021   1007           00205         bcf     PORTC,0
                      00206 
                      00207         
                      00208         
0022   2823           00209         goto    EndInt  
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00210 ;----------------------------------------
0023                  00211 EndInt
                      00212 
0023   0821           00213         movfw   PCLATH_TEMP
0024   008A           00214         movwf   PCLATH
0025   0E7F           00215         swapf   STATUS_TEMP,W
0026   0083           00216         movwf   STATUS
0027   0EFE           00217         swapf   W_TEMP,F
0028   0E7E           00218         swapf   W_TEMP,W        
                      00219 
0029   0009           00220         retfie
                      00221 
                      00222 ;==================================================
                      00223 ;INIT CODE 
                      00224 ;==================================================
                      00225 
002A                  00226 start
002A   0064           00227         clrwdt
002B   0000           00228         nop
                      00229 
                      00230 ;====== Register 20H bis 7FH löschen ======
                      00231 
002C   3020           00232         movlw   20      ; beginne bei Register 20H
002D   0084           00233         movwf   04      ; FSR
                      00234 
002E                  00235 loop_1
002E   0180           00236         clrf    0
002F   0A84           00237         incf    04,1
0030   1F84           00238         btfss   04,7    ; wenn REGISTER 80H erreicht
0031   282E           00239         goto loop_1
                      00240 
0032   0064           00241         clrwdt
0033   0000           00242         nop
                      00243 
                      00244 ;======= Timer 2 INIT ========
                      00245 
0034   304E           00246         movlw   b'1001110'      ; T2on, Prescale 16, Postscale 10
0035   0092           00247         movwf   T2CON
0036   1683           00248         bsf     STATUS,RP0                      ; Bank 1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0037   148C           00249         bsf     PIE1, TMR2IE    ; Timer 2 Interrupt enable
0038   30FA           00250         movlw   d'250'                  ; 
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0039   0092           00251         movwf   PR2
003A   1283           00252         bcf             STATUS,RP0                      ; Bank 1
                      00253 
                      00254 
                      00255 ;======== Timer 1 INIT =========
003B   1283           00256         bcf             3,5
003C   3021           00257         movlw   b'100001'
003D   0090           00258         movwf   T1CON
                      00259 
                      00260         
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

003E   1683           00261         bsf             3,5
                      00262 ;       bsf             PIE1, TMR1IE
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
003F   100C           00263         bcf             PIE1, TMR1IE
                      00264 
                      00265 ;======= Port A init =============
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0040   1205           00266         bcf             TRISA,4         ; D0 für Display
                      00267 
                      00268 ;======= Port D init =============
                      00269 
                      00270 ;       movlw   b'000000000'    ; Alles Ausgänge
0041   30F8           00271         movlw   b'11111000'             ; Bit 0-2 = Controlbits für Display
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0042   0088           00272         movwf   TRISD
                      00273 
                      00274 ;======== Port B init ============
                      00275 
                      00276 ;       movlw   b'11000110'             ; Tastatur Scanner
0043   30C0           00277         movlw   b'11000000'             ; Bit 0-5 = D2-7 für Display
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0044   0086           00278         movwf   TRISB
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0045   1781           00279         bsf             OPTION_REG, 7   ; Pull-Ups für PORT B einschalten
                      00280 
                      00281 ;======== Port C init ============
                      00282 
                      00283 ;       movlw   b'00111000'             ; Daten CS-Generator '138 (Bit 0-2)
                      00284                                         ; PWM-IN (Bit 3-5)
0046   30EF           00285         movlw   b'11101111'     ; Alles Eingänge
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0047   0087           00286         movwf   TRISC
0048   1283           00287         BCF     STATUS,RP0      ;Bank 2
0049   1703           00288         BSF     STATUS,RP1      ;
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
004A   0187           00289         CLRF    LCDCON          ;Disable VLCD<3:1>
004B   1683           00290         BSF     STATUS,RP0      ;Bank 0
004C   1303           00291         BCF     STATUS,RP1
                      00292 ;======== Port E init ============
                      00293 
                      00294 ;       movlw   b'00000000'             ; Daten für Display
004D   30FB           00295         movlw   b'11111011'             ; Bit 2 = D1 für Display
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
004E   0089           00296         movwf   TRISE
                      00297 
                      00298 
                      00299 ;======== Serial Port Init ============
                      00300 
004F   3033           00301         movlw   d'51'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0050   0099           00302         movwf   SPBRG                   ; Serial Port Baudrategenerator (Wert aus Tabelle = 19200 Baud)
                      00303 
                      00304 
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0051   3065           00305         movlw   b'01100101'             ; 8Bit-Transm., TxEnable, Asynch.Mode, High Baudrate
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0052   0098           00306         movwf   TXSTA                   ; TRANSMIT STATUS AND CONTROL REGISTER 
                      00307 
0053   1283           00308         bcf             3,5
0054   3090           00309         movlw   b'10010000'             ; SerialPort Enable. CREN ena (Continues Receive), 8Bit receive 
                            (wg. PC)
0055   0098           00310         movwf   RCSTA                   ; ;RCSTA: RECEIVE STATUS AND CONTROL REGISTER
                      00311 
                      00312 
                      00313 ;=========  A/D-Wandler INIT =====
                      00314 
0056   1683           00315         bsf             3,5
                      00316 
0057   300F           00317         movlw   b'00001111'             ; Kanal AN0-3 sind benutzt
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0058   0091           00318         movwf   ANSEL
                      00319 
0059   3060           00320         movlw   b'01100000'             ; Fosc /64
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
005A   009F           00321         movwf   ADCON1
                      00322         
                      00323 
005B   1283           00324         bcf             3,5
005C   1303           00325         bcf             3,6
                      00326 
005D   3001           00327         movlw   b'00000001'             ; Left justified, VREF=Versorgung, ADON
005E   009F           00328         movwf   ADCON0
                      00329 
005F   170B           00330         bsf             INTCON, PEIE
0060   178B           00331         bsf             INTCON, GIE
                      00332 
0061   01BF           00333         clrf    AD_STATUS       ; = kein neuer AD-Wert da
                      00334 
0062   3004           00335         movlw   0x4
0063   00AA           00336         movwf   TASTE_IDX
0064   3005           00337         movlw   0x5
0065   00A9           00338         movwf   TASTE_LAST
                      00339 
0066   01A4           00340         clrf    AD0
0067   01A5           00341         clrf    AD1
0068   1607           00342         bsf     PORTC,4         ; Data Enable für RS485-Transceiver
                      00343         
0069   24D8           00344         call    display_init
006A   01B2           00345         clrf    DISP_STAT
006B   1732           00346         bsf     DISP_STAT,6             ; Display on
006C   2497           00347         call    display
                      00348 
006D   301E           00349         movlw   d'30'
006E   00A3           00350         movwf   TIM2_10MS
                      00351 
006F                  00352 DispInitLoop    
006F   08A3           00353         movf    TIM2_10MS,F
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0070   1D03           00354         btfss   STATUS,Z
0071   286F           00355         goto    DispInitLoop    
                      00356 
0072   208C           00357         call    DispVersion
0073   30C8           00358         movlw   d'200'
0074   00A3           00359         movwf   TIM2_10MS
                      00360         
0075                  00361 VersLoop
0075   08A3           00362         movf    TIM2_10MS,F
0076   1D03           00363         btfss   STATUS,Z
0077   2875           00364         goto    VersLoop
                      00365 
0078   3000           00366         movlw   0
0079   00E8           00367         movwf   HEX_AKT
007A   00ED           00368         movwf   FARB_SPEICHER_IDX
                      00369 
007B   30C0           00370         movlw   0xC0            ; Eigenes Farbprogramm
007C   2545           00371         call    EEpromRead
007D   01EA           00372         clrf    FARB_IDX_AKT
007E   01EB           00373         clrf    FARB_IDX_NEXT
007F   0AEB           00374         incf    FARB_IDX_NEXT,F
0080   01AF           00375         clrf    SEKUNDEN_COUNT
0081   01A3           00376         clrf    TIM2_10MS
0082   01E6           00377         clrf    TIMECOUNT
                      00378 
                      00379 
0083   2511           00380         call    ClearTastBuff
                      00381 
                      00382 
                      00383 
                      00384 ;==========MainLoop
                      00385 
0084                  00386 main
0084   2409           00387         call    HexScan                         ; HEx-Schalter nach HEX_AKT einlesen
0085   23AC           00388         call    TastScan                        ; Tastatur-Sac, Wert nach TASTE_AKT
0086   2451           00389         call    ADconv                          ; AD.Wandlung beider Kanäle, Wert nach AD0 und AD1
0087   2165           00390         call    HEX1_Dispatch           ; Automatik-Modus
0088   21C0           00391         call    HEX2_Dispatch           ; Gateway Funktion
0089   2234           00392         call    TastDispatch
                      00393 ;       call    display
008A   2133           00394         call    AdDispatch                      ; Wenn sich einer der D-Wert geändert hat
                      00395 
                      00396 ;       movlw   #2
                      00397 ;       movwf   TIM1_10MS
                      00398 
008B                  00399 MainWaitLoop    
                      00400 ;       movf    TIM1_10MS,F
                      00401 ;       btfss   STATUS,Z
                      00402 ;       goto    MainWaitLoop
                      00403 
                      00404 
008B   2884           00405         goto    main
                      00406 
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00407 
                      00408 ;===================================================
                      00409 ; DispVersion
                      00410 ;===================================================
008C                  00411 DispVersion
008C   01AB           00412         clrf    TEMP                    ; als ByteCount
008D   3050           00413         movlw   DISP_BUFF
008E   0084           00414         movwf   FSR                     ; 4
008F                  00415 DispVersion_1
008F   3007           00416         movlw   HIGH VersionData
0090   008A           00417         movwf   PCLATH
0091   082B           00418         movfw   TEMP
0092   2722           00419         call    VersionData
0093   018A           00420         clrf    PCLATH
0094   0080           00421         movwf   INDF
0095   0A84           00422         incf    FSR,F
0096   0AAB           00423         incf    TEMP,F
0097   1E2B           00424         btfss   TEMP,4
0098   288F           00425         goto    DispVersion_1
                      00426 
0099   1431           00427         bsf     DISP_Z_FLAG,0
009A   2497           00428         call    display
                      00429 
009B   0008           00430         return
                      00431 ;===================================================
                      00432 ; DispGateway
                      00433 ;===================================================
009C                  00434 DispGateway
009C   01AB           00435         clrf    TEMP                    ; als ByteCount
009D   3050           00436         movlw   DISP_BUFF
009E   0084           00437         movwf   FSR                     ; 4
009F                  00438 DispGateway_1
009F   3007           00439         movlw   HIGH GatewayData
00A0   008A           00440         movwf   PCLATH
00A1   082B           00441         movfw   TEMP
00A2   2744           00442         call    GatewayData
00A3   018A           00443         clrf    PCLATH
00A4   0080           00444         movwf   INDF
00A5   0A84           00445         incf    FSR,F
00A6   0AAB           00446         incf    TEMP,F
00A7   1E2B           00447         btfss   TEMP,4
00A8   289F           00448         goto    DispGateway_1
00A9   1431           00449         bsf     DISP_Z_FLAG,0
00AA   2497           00450         call    display
00AB   0008           00451         return
                      00452 ;===================================================
                      00453 ; DispMainParam
                      00454 ;===================================================
00AC                  00455 DispMainParam
00AC   01AB           00456         clrf    TEMP                    ; als ByteCount
00AD   3050           00457         movlw   DISP_BUFF
00AE   0084           00458         movwf   FSR                     ; 4
00AF                  00459 DispMainParam_1
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00AF   3007           00460         movlw   HIGH MainParamData
00B0   008A           00461         movwf   PCLATH
00B1   082B           00462         movfw   TEMP
00B2   2733           00463         call    MainParamData
00B3   018A           00464         clrf    PCLATH
00B4   0080           00465         movwf   INDF
00B5   0A84           00466         incf    FSR,F
00B6   0AAB           00467         incf    TEMP,F
00B7   1E2B           00468         btfss   TEMP,4
00B8   28AF           00469         goto    DispMainParam_1
00B9   1431           00470         bsf     DISP_Z_FLAG,0
00BA   2497           00471         call    display
                      00472 
00BB   2507           00473         call    ClearDispBuff
                      00474 
00BC   0824           00475         movfw   AD0
00BD   00AB           00476         movwf   TEMP
00BE   3050           00477         movlw   DISP_BUFF+0
00BF   0084           00478         movwf   FSR
00C0   233A           00479         call    sutoa
                      00480 
00C1   0825           00481         movfw   AD1
00C2   00AB           00482         movwf   TEMP
00C3   3054           00483         movlw   DISP_BUFF+4
00C4   0084           00484         movwf   FSR
00C5   233A           00485         call    sutoa
                      00486 
00C6   0826           00487         movfw   AD2
00C7   00AB           00488         movwf   TEMP
00C8   3058           00489         movlw   DISP_BUFF+d'8'
00C9   0084           00490         movwf   FSR
00CA   233A           00491         call    sutoa
                      00492 
                      00493 
00CB   0827           00494         movfw   AD3
00CC   00AB           00495         movwf   TEMP
00CD   305C           00496         movlw   DISP_BUFF+d'12'
00CE   0084           00497         movwf   FSR
00CF   233A           00498         call    sutoa
                      00499 
                      00500 
00D0   14B1           00501         bsf     DISP_Z_FLAG,1
00D1   2497           00502         call    display
                      00503 
00D2   0008           00504         return
                      00505 
                      00506 ;----------------------------------------
00D3                  00507 wait_3ms
00D3   20D6           00508         call    wait_750us
00D4                  00509 wait_22zms
00D4   20D6           00510         call    wait_750us
                      00511 
00D5                  00512 wait_15zms
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00D5   20D6           00513         call    wait_750us
00D6                  00514 wait_750us
00D6   1010           00515         bcf     T1CON,0         ; Timer1 stoppen        
00D7   018E           00516         clrf    TMR1L           ; TMR1L                 
00D8   018F           00517         clrf    TMR1H           ; TMR1H                 
00D9   1410           00518         bsf     T1CON,0         ; Timer1 starten        
00DA   3003           00519         movlw   d'3'
00DB   020F           00520         subwf   TMR1H,0
00DC   1D03           00521         btfss   STATUS,2        ; 
00DD   28DB           00522         goto    $-2             ; auf Bit warten        
00DE   0008           00523         return                  ; mit Aufruf            
                      00524 
                      00525 
                      00526 
                      00527 ;===================================================
                      00528 ; V24Send
                      00529 ; Gibt WREG an TX-Buffer aus und wartet 3ms
                      00530 ;===================================================
                      00531 
00DF                  00532 V24Send
00DF   1683           00533         bsf     3,5
00E0                  00534 WaitTxBufferleer
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00E0   1C98           00535         btfss   TXSTA,TRMT
00E1   28E0           00536         goto    WaitTxBufferleer
00E2   1283           00537         bcf     3,5
00E3   0099           00538         movwf   TXREG
                      00539 
00E4   0008           00540         return
                      00541 
                      00542 ;===================================================
                      00543 ; MoveToDispBuff
                      00544 ; Verschiebt ab Adresse in WREG 16 Bytes nach DispBuff
                      00545 ;===================================================
                      00546 
00E5                  00547 MoveToDispBuff
00E5   00AB           00548         movwf   TEMP            ; LeseAdresse
00E6   3050           00549         movlw   DISP_BUFF
00E7   00AC           00550         movwf   TEMP1           ; Schreibadresse
00E8   3010           00551         movlw   0x10            ; Zähler
00E9   00AD           00552         movwf   TEMP2
                      00553 
00EA                  00554 MoveToDispBuff1
                      00555 
00EA   082B           00556         movfw   TEMP            ; Lese-Adresse
00EB   0084           00557         movwf   FSR
00EC   0800           00558         movfw   INDF
00ED   00BB           00559         movwf   TEMP3           ; gelesenes Byte
                      00560 
00EE   0A84           00561         incf    FSR,F
00EF   0804           00562         movfw   FSR
00F0   00AB           00563         movwf   TEMP            ; Leseadresse speichern
00F1   082C           00564         movfw   TEMP1           ; Schreibadr.
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00F2   0084           00565         movwf   FSR
00F3   083B           00566         movfw   TEMP3           ; gelesenes Byte
00F4   0080           00567         movwf   INDF
00F5   0A84           00568         incf    FSR,F
00F6   0804           00569         movfw   FSR             ; Schreibadr
00F7   00AC           00570         movwf   TEMP1   
                      00571 
00F8   0BAD           00572         decfsz  TEMP2,F
00F9   28EA           00573         goto    MoveToDispBuff1
                      00574 
00FA   0008           00575         return
                      00576 
                      00577 ;===================================================
                      00578 ; BinToHex8
                      00579 ; Wandelt 8 Bytes ab Adress (WREG) in ASCII HEX nach DISP_BUFF
                      00580 ;===================================================
                      00581 
00FB                  00582 BinToHex8
00FB   00AB           00583         movwf   TEMP            ; LeseAdresse
00FC   3050           00584         movlw   DISP_BUFF
00FD   00AC           00585         movwf   TEMP1           ; Schreibadresse
00FE   3008           00586         movlw   0x8             ; Zähler
00FF   00AD           00587         movwf   TEMP2
                      00588 
0100                  00589 BinToHex81
                      00590 
0100   082B           00591         movfw   TEMP            ; Lese-Adresse
0101   0084           00592         movwf   FSR
0102   1683           00593         bsf     STATUS,RP0
0103   0800           00594         movfw   INDF
0104   1283           00595         bcf     STATUS,RP0
0105   00BB           00596         movwf   TEMP3           ; gelesenes Byte
0106   0A84           00597         incf    FSR,F
0107   0804           00598         movfw   FSR
0108   00AB           00599         movwf   TEMP            ; Leseadresse speicher
0109   082C           00600         movfw   TEMP1           ; Schreibadr.
010A   0084           00601         movwf   FSR
                      00602 
010B   0E3B           00603         swapf   TEMP3,W         ; gelesenes Byte, High Nibble
010C   390F           00604         andlw   0xf     
010D   211C           00605         call    BinToHex
010E   20DF           00606         call    V24Send
                      00607 
010F   0080           00608         movwf   INDF
0110   0A84           00609         incf    FSR,F
                      00610 
0111   083B           00611         movfw   TEMP3           ; gelesenes Byte Low Nibble
0112   390F           00612         andlw   0xf     
0113   211C           00613         call    BinToHex
0114   20DF           00614         call    V24Send
                      00615 
0115   0080           00616         movwf   INDF
0116   0A84           00617         incf    FSR,F
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00618 
                      00619 
0117   0804           00620         movfw   FSR             ; Schreibadr
0118   00AC           00621         movwf   TEMP1   
                      00622 
0119   0BAD           00623         decfsz  TEMP2,F
011A   2900           00624         goto    BinToHex81
                      00625 
011B   0008           00626         return
                      00627 
                      00628 
                      00629 
011C                  00630 BinToHex
011C   00BC           00631         movwf   TEMP4
                      00632 
011D   3007           00633         movlw   HIGH BinToHexTab
011E   008A           00634         movwf   PCLATH
011F   083C           00635         movfw   TEMP4
0120   2711           00636         call    BinToHexTab
0121   018A           00637         clrf    PCLATH
                      00638 
                      00639 
0122   0008           00640         return
                      00641 
                      00642 ;===================================================
                      00643 ; Zeigt den Text "Keine Funktion in Zeile 1 an
                      00644 ;===================================================
                      00645 
0123                  00646 DispKeineFunktion
                      00647 ; ZEile 1
0123   01AB           00648         clrf    TEMP                    ; als ByteCount
0124   3050           00649         movlw   DISP_BUFF
0125   0084           00650         movwf   FSR                     ; 4
0126                  00651 DispKeineFunktionLoop   
0126   3007           00652         movlw   HIGH DatenKeineFunktion
0127   008A           00653         movwf   PCLATH
0128   082B           00654         movfw   TEMP
                      00655 
0129   2700           00656         call    DatenKeineFunktion
012A   018A           00657         clrf    PCLATH
012B   0080           00658         movwf   INDF
012C   0A84           00659         incf    FSR,F
012D   0AAB           00660         incf    TEMP,F
012E   1E2B           00661         btfss   TEMP,4
012F   2926           00662         goto    DispKeineFunktionLoop
                      00663 
0130   1431           00664         bsf     DISP_Z_FLAG,0
0131   2497           00665         call    display
0132   0008           00666         return
                      00667 
                      00668 
                      00669 
                      00670 ;===================================================
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00671 ; AdDispatch
                      00672 ; ADconv (mainloop) signalisiert in AD0 und AD1 Bit 7 = 1,
                      00673 ; daß sich ein Wert verändert hat.
                      00674 ;===================================================
0133                  00675 AdDispatch
                      00676         
0133   0868           00677         movfw   HEX_AKT
0134   390F           00678         andlw   0xf
0135   3C02           00679         sublw   2                       ; Hex =2 --> Gateway-Funktion
0136   1903           00680         btfsc   STATUS,Z
0137   0008           00681         return
                      00682 
                      00683 
                      00684 ;--------  HEX-Drehschalters = 0 ? -------------
                      00685 
0138   0868           00686         movfw   HEX_AKT
0139   390F           00687         andlw   0xf
013A   3C00           00688         sublw   0
013B   1D03           00689         btfss   STATUS,Z
013C   0008           00690         return
Message[305]: Using default destination of 1 (file).
013D   08BF           00691         movf    AD_STATUS
013E   1903           00692         btfsc   STATUS,Z
013F   0008           00693         return
                      00694 
0140   01BF           00695         clrf    AD_STATUS       
                      00696 
0141   2144           00697         call    SendNewColor
0142   20AC           00698         call    DispMainParam
0143   0008           00699         return
                      00700 
                      00701 ;===================================================
                      00702 ; SendNewColor gibt die neue Farbe an die Kachel aus
                      00703 ;===================================================
0144                  00704 SendNewColor
0144   30FF           00705         movlw   0xFF            ; Adresse Broadcast
                      00706 ;       movlw   0x55
                      00707 
0145   1683           00708         bsf     3,5
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0146   1418           00709         bsf     TXSTA, TX9D     ; 9. Bit (= Adressabyte) setzen
0147   1283           00710         bcf     3,5
0148   20DF           00711         call    V24Send
                      00712 
0149   0824           00713         movfw   AD0             ; ROT-Wert
014A   1683           00714         bsf     3,5
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
014B   1018           00715         bcf     TXSTA, TX9D     ; 9. Bit (= Adressabyte) rücksetzen
014C   1283           00716         bcf     3,5
014D   20DF           00717         call    V24Send
                      00718 
014E   0825           00719         movfw   AD1             ; Gruen-Wert
014F   20DF           00720         call    V24Send
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00721 
0150   0826           00722         movfw   AD2             ; Blau-Wert
0151   20DF           00723         call    V24Send
                      00724 
0152   01AB           00725         clrf    TEMP
                      00726         
0153   0824           00727         movfw   AD0
0154   215C           00728         call    ZeroCount
                      00729 
0155   0825           00730         movfw   AD1
0156   215C           00731         call    ZeroCount
                      00732 
0157   0826           00733         movfw   AD2
0158   215C           00734         call    ZeroCount
                      00735 
0159   082B           00736         movfw   TEMP
015A   20DF           00737         call    V24Send
                      00738 
015B   0008           00739         return
                      00740 
                      00741 ;----
015C                  00742 ZeroCount
015C   00AC           00743         movwf   TEMP1           ; Byte, in dem die Nullen gezählt werden
015D   3008           00744         movlw   #8
015E   00AD           00745         movwf   TEMP2           ;Schleifenzähler        
015F                  00746 ZeroCountLoop
Message[305]: Using default destination of 1 (file).
015F   0CAC           00747         rrf     TEMP1
0160   1C03           00748         btfss   STATUS,C
Message[305]: Using default destination of 1 (file).
0161   0AAB           00749         incf    TEMP            ; Zähler für die Nullen
                      00750 
Message[305]: Using default destination of 1 (file).
0162   0BAD           00751         decfsz  TEMP2
0163   295F           00752         goto    ZeroCountLoop
0164   0008           00753         return
                      00754 
                      00755 ;===================================================
                      00756 ; Dispatch_Hex1 für Drehschalter in STellung 1 (Automatik-Modus)
                      00757 ;===================================================
0165                  00758 HEX1_Dispatch
                      00759         
                      00760 
                      00761 ;--------  HEX-Drehschalters = 1 ? -------------
                      00762 
0165   0868           00763         movfw   HEX_AKT
0166   390F           00764         andlw   0xf
0167   3C01           00765         sublw   1
0168   1D03           00766         btfss   STATUS,Z
0169   0008           00767         return
                      00768 
Message[305]: Using default destination of 1 (file).
016A   08A3           00769         movf    TIM2_10MS
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

016B   1D03           00770         btfss   STATUS,Z
016C   0008           00771         return
                      00772 
016D   0827           00773         movfw   AD3             ; Speed
016E   00A3           00774         movwf   TIM2_10MS       
                      00775 
016F   03AF           00776         decf    SEKUNDEN_COUNT,F
0170   1D03           00777         btfss   STATUS,Z
0171   0008           00778         return
                      00779 
0172   082E           00780         movfw   SEKUNDEN_WERT
0173   00AF           00781         movwf   SEKUNDEN_COUNT
                      00782 
                      00783 
                      00784         
0174   0AE6           00785         incf    TIMECOUNT,F
                      00786 ;       btfss   TIMECOUNT,7     ; erweitert auf 8 bit mit nächster Zeile
0175   1D03           00787         btfss   STATUS,Z
0176   29B4           00788         goto    NormalWeiter
                      00789 
0177   01E6           00790         clrf    TIMECOUNT
                      00791 
0178   0AEA           00792         incf    FARB_IDX_AKT,F
0179   0AEB           00793         incf    FARB_IDX_NEXT,F
                      00794 
                      00795 ; Ab hier neuen Farbwert ansteuern
                      00796 ; erst Index evtl. auf 0 setzen
017A   3010           00797         movlw   0x10
017B   026A           00798         subwf   FARB_IDX_AKT,W
017C   1903           00799         btfsc   STATUS,Z
017D   01EA           00800         clrf    FARB_IDX_AKT
                      00801 
017E   3010           00802         movlw   0x10
017F   026B           00803         subwf   FARB_IDX_NEXT,W
0180   1903           00804         btfsc   STATUS,Z
0181   01EB           00805         clrf    FARB_IDX_NEXT
                      00806 
                      00807 ; Wenn Zeit für FARB_IDX_NEXT = 7F, Dann FARB_IDX_NEXT = 0 (7F = Ende)
0182   3004           00808         movlw   4
0183   00AB           00809         movwf   TEMP
0184   01B5           00810         clrf    ACC1_L
0185   01B4           00811         clrf    ACC1_H
0186   01B7           00812         clrf    ACC2_H
0187   086B           00813         movfw   FARB_IDX_NEXT
0188   00B8           00814         movwf   ACC2_L
0189   2326           00815         call    AddAccRep       
018A   30A0           00816         movlw   FARBTAB
018B   0735           00817         addwf   ACC1_L,W
018C   3E03           00818         addlw   3                               ; Zeit-Index
018D   0084           00819         movwf   FSR
018E   1683           00820         bsf     STATUS,RP0                      ; Bank 1
018F   0800           00821         movfw   INDF
0190   1283           00822         bcf     STATUS,RP0                      ; Bank 0
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0191   3C7F           00823         sublw   0x7f
0192   1D03           00824         btfss   STATUS,Z
0193   2995           00825         goto    ZEIT_FidxAktholen
0194   01EB           00826         clrf    FARB_IDX_NEXT
                      00827 
                      00828 ; Zeit in SEKUNDEN_WERT transferieren
0195                  00829 ZEIT_FidxAktholen
0195   3004           00830         movlw   4
0196   00AB           00831         movwf   TEMP
0197   01B5           00832         clrf    ACC1_L
0198   01B4           00833         clrf    ACC1_H
0199   01B7           00834         clrf    ACC2_H
019A   086A           00835         movfw   FARB_IDX_AKT
019B   00B8           00836         movwf   ACC2_L
019C   2326           00837         call    AddAccRep       
                      00838 
                      00839 ; neue Farbe in Acc
019D   30A0           00840         movlw   FARBTAB
019E   0735           00841         addwf   ACC1_L,W
019F   3E03           00842         addlw   3                               ; Zeit-Index
01A0   0084           00843         movwf   FSR
01A1   1683           00844         bsf     STATUS,RP0                      ; Bank 1
01A2   0800           00845         movfw   INDF
01A3   1283           00846         bcf     STATUS,RP0                      ; Bank 0
01A4   00AE           00847         movwf   SEKUNDEN_WERT
01A5   00AF           00848         movwf   SEKUNDEN_COUNT
01A6   3C7F           00849         sublw   0x7f
01A7   1D03           00850         btfss   STATUS,Z
01A8   29AB           00851         goto    Weiter_FIDX
01A9   01EA           00852         clrf    FARB_IDX_AKT
01AA   2995           00853         goto    ZEIT_FidxAktholen
01AB                  00854 Weiter_FIDX
01AB   2222           00855         call    LadeSekundenWert
01AC   08AE           00856         movf    SEKUNDEN_WERT,F
01AD   1D03           00857         btfss   STATUS,Z
01AE   29B4           00858         goto    NormalWeiter
                      00859 
01AF   3001           00860         movlw   1
01B0   00A3           00861         movwf   TIM2_10MS
01B1   00AF           00862         movwf   SEKUNDEN_COUNT
01B2   307F           00863         movlw   0x7F
01B3   00E6           00864         movwf   TIMECOUNT
                      00865 
                      00866 ; hier noch Index auf Farbtab Akt und Next ändern
                      00867 
01B4                  00868 NormalWeiter    ; 
01B4   01EC           00869         clrf    FARB_COUNT
01B5   21EC           00870         call    FarbeSteppen
01B6   00A4           00871         movwf   AD0
                      00872         
01B7   0AEC           00873         incf    FARB_COUNT,F
01B8   21EC           00874         call    FarbeSteppen
01B9   00A5           00875         movwf   AD1
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00876         
01BA   0AEC           00877         incf    FARB_COUNT,F
01BB   21EC           00878         call    FarbeSteppen
01BC   00A6           00879         movwf   AD2
                      00880 
                      00881 
01BD   2144           00882         call    SendNewColor
01BE   20AC           00883         call    DispMainParam
                      00884 
                      00885 
                      00886         
01BF                  00887 NormalDispatchEnd
                      00888 
01BF   0008           00889         return
                      00890 
                      00891 
                      00892 ;===================================================
                      00893 ; Dispatch_Hex1 für Drehschalter in Stllung 2 (Gateway)
                      00894 ;===================================================
01C0                  00895 HEX2_Dispatch
                      00896         
                      00897 
                      00898 ;--------  HEX-Drehschalters = 2? -------------
                      00899 
01C0   0868           00900         movfw   HEX_AKT
01C1   390F           00901         andlw   0xf
01C2   3C02           00902         sublw   2
01C3   1D03           00903         btfss   STATUS,Z
01C4   0008           00904         return
                      00905 
01C5   1A8C           00906         btfsc   PIR1, RCIF
01C6   29CD           00907         goto    RecByteAvailable        
                      00908         
                      00909 
01C7   1C98           00910         btfss   RCSTA, OERR
01C8   0008           00911         return
01C9   01EF           00912         clrf    RX_COUNT
01CA   1218           00913         bcf             RCSTA, CREN     ; Reset evtl. Overflow
01CB   1618           00914         bsf             RCSTA, CREN
01CC   0008           00915         return
                      00916 
01CD                  00917 RecByteAvailable
                      00918 
01CD   128C           00919         bcf             PIR1, RCIF  
01CE   08A3           00920         movf    TIM2_10MS,F     ; Timeout?
01CF   1903           00921         btfsc   STATUS,Z
01D0   01EF           00922         clrf    RX_COUNT
                      00923 
01D1   3002           00924         movlw   2
01D2   00A3           00925         movwf   TIM2_10MS       ; Timeout-Counter (30msec)
                      00926 
                      00927         
01D3   3040           00928         movlw   TASTBUFF
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01D4   076F           00929         addwf   RX_COUNT,W
01D5   0084           00930         movwf   FSR
                      00931 
01D6   081A           00932         movfw   RCREG
01D7   00AB           00933         movwf   TEMP
                      00934 
01D8   0080           00935         movwf   INDF
01D9   0AEF           00936         incf    RX_COUNT,F
01DA   086F           00937         movfw   RX_COUNT
01DB   3C06           00938         sublw   0x6
01DC   1D03           00939         btfss   STATUS,Z
01DD   0008           00940         return  
                      00941 ; gerade Empfangenes Byte = ETX?
                      00942 
01DE   082B           00943         movfw   TEMP
01DF   3C03           00944         sublw   ETX
01E0   1903           00945         btfsc   STATUS,Z
01E1   29E4           00946         goto    SendToKachel
01E2   01EF           00947         clrf    RX_COUNT        
01E3   0008           00948         return
01E4                  00949 SendToKachel
01E4   0842           00950         movfw   TASTBUFF+2
01E5   00A4           00951         movwf   AD0
01E6   0843           00952         movfw   TASTBUFF+3
01E7   00A5           00953         movwf   AD1
01E8   0844           00954         movfw   TASTBUFF+4
01E9   00A6           00955         movwf   AD2
                      00956         
01EA   2144           00957         call    SendNewColor
01EB   0008           00958         return
                      00959 ;===================================================
                      00960 
01EC                  00961 FarbeSteppen
                      00962 
01EC   3004           00963         movlw   4
01ED   00AB           00964         movwf   TEMP
01EE   01B5           00965         clrf    ACC1_L
01EF   01B4           00966         clrf    ACC1_H
01F0   01B7           00967         clrf    ACC2_H
01F1   086A           00968         movfw   FARB_IDX_AKT
01F2   00B8           00969         movwf   ACC2_L
01F3   2326           00970         call    AddAccRep       
                      00971 
                      00972 ; neue Farbe in Acc
01F4   30A0           00973         movlw   FARBTAB
01F5   0735           00974         addwf   ACC1_L,W
01F6   076C           00975         addwf   FARB_COUNT,W
01F7   0084           00976         movwf   FSR
01F8   1683           00977         bsf     STATUS,RP0                      ; Bank 1
01F9   0800           00978         movfw   INDF
01FA   1283           00979         bcf     STATUS,RP0                      ; Bank 0
01FB   00AD           00980         movwf   TEMP2   ; Farbe aKT
                      00981         
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00982 ; ------ NÄCHSTE fARBE  
01FC   3004           00983         movlw   4
01FD   00AB           00984         movwf   TEMP
01FE   01B5           00985         clrf    ACC1_L
01FF   01B4           00986         clrf    ACC1_H
0200   01B7           00987         clrf    ACC2_H
0201   086B           00988         movfw   FARB_IDX_NEXT
0202   00B8           00989         movwf   ACC2_L
0203   2326           00990         call    AddAccRep       
                      00991 
                      00992 ; neue Farbe in Acc
0204   30A0           00993         movlw   FARBTAB
0205   0735           00994         addwf   ACC1_L,W
0206   076C           00995         addwf   FARB_COUNT,W
0207   0084           00996         movwf   FSR
0208   1683           00997         bsf     STATUS,RP0                      ; Bank 1
                      00998 
0209   0800           00999         movfw   INDF
020A   1283           01000         bcf     STATUS,RP0                      ; Bank 0
020B   00BB           01001         movwf   TEMP3   ; Farbe Next
                      01002 
020C   12B9           01003         bcf     TEMPFLAG,5      ; Merker ob Differnez addiert o. subtr. werden muß
                      01004                 
                      01005 
020D   082D           01006         movfw   TEMP2
020E   023B           01007         subwf   TEMP3,W
020F   1803           01008         btfsc   STATUS,C
0210   2A14           01009         goto    KeinSwap
                      01010 
0211   083B           01011         movfw   TEMP3           ; TEMP2 ist größer TEMP3
0212   022D           01012         subwf   TEMP2,W
0213   16B9           01013         bsf     TEMPFLAG,5
0214                  01014 KeinSwap
                      01015 
0214   00B8           01016         movwf   ACC2_L
0215   01B7           01017         clrf    ACC2_H
0216   01B5           01018         clrf    ACC1_L
0217   01B4           01019         clrf    ACC1_H
0218   0866           01020         movfw   TIMECOUNT
0219   00AB           01021         movwf   TEMP
021A   2326           01022         call    AddAccRep
                      01023 ;       rlf     ACC1_L,F
                      01024 ;       rlf     ACC1_H,F
                      01025         
                      01026         
021B   0834           01027         movfw   ACC1_H
021C   1EB9           01028         btfss   TEMPFLAG,5
021D   2A20           01029         goto    AddDifferenz
021E   022D           01030         subwf   TEMP2,W
021F   2A21           01031         goto EndDifferenz
0220                  01032 AddDifferenz
0220   072D           01033         addwf   TEMP2,W
0221                  01034 EndDifferenz
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01035 
0221   0008           01036         return
                      01037 
                      01038 
                      01039 
                      01040 
                      01041 
                      01042 
                      01043 
0222                  01044 LadeSekundenWert
                      01045 
                      01046 ; Zeit in SEKUNDEN_WERT transferieren
0222   3004           01047         movlw   4
0223   00AB           01048         movwf   TEMP
0224   01B5           01049         clrf    ACC1_L
0225   01B4           01050         clrf    ACC1_H
0226   01B7           01051         clrf    ACC2_H
0227   086A           01052         movfw   FARB_IDX_AKT
0228   00B8           01053         movwf   ACC2_L
0229   2326           01054         call    AddAccRep       
                      01055 
                      01056 ; neue Farbe in Acc
022A   30A0           01057         movlw   FARBTAB
022B   0735           01058         addwf   ACC1_L,W
022C   3E03           01059         addlw   3                               ; Zeit-Index
022D   0084           01060         movwf   FSR
022E   1683           01061         bsf     STATUS,RP0                      ; Bank 1
022F   0800           01062         movfw   INDF
0230   1283           01063         bcf     STATUS,RP0                      ; Bank 0
0231   00AE           01064         movwf   SEKUNDEN_WERT
0232   00AF           01065         movwf   SEKUNDEN_COUNT
                      01066 
                      01067 
0233   0008           01068         return
                      01069 
                      01070 
                      01071 
                      01072 
                      01073 
                      01074 
                      01075 ;===================================================
                      01076 ; TastDispatch
                      01077 ;===================================================
                      01078 
0234                  01079 TastDispatch
                      01080         
0234   0868           01081         movfw   HEX_AKT
0235   390F           01082         andlw   0xf
0236   3C02           01083         sublw   2                       ; Hex =2 --> Gateway-Funktion
0237   1903           01084         btfsc   STATUS,Z
0238   0008           01085         return
                      01086 
                      01087 
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01088 ;--------  HEX-Drehschalters = 1 ? -------------
                      01089 
                      01090 
                      01091 
0239   0868           01092         movfw   HEX_AKT
023A   390F           01093         andlw   0xf
023B   3C01           01094         sublw   1
023C   1D03           01095         btfss   STATUS,Z
023D   2A5C           01096         goto    TestHex_0
                      01097 
023E   1FA8           01098         btfss   TASTE_AKT,7
023F   0008           01099         return
                      01100 
0240   13A8           01101         bcf     TASTE_AKT,7
0241   1328           01102         bcf     TASTE_AKT,6
0242   0828           01103         movfw   TASTE_AKT
                      01104 
0243   3001           01105         movlw   1
0244   0228           01106         subwf   TASTE_AKT,W
0245   1D03           01107         btfss   STATUS,Z
0246   2A49           01108         goto    TestTaste_2
                      01109 
0247   22C3           01110         call    Farbprogramm_1
0248   2AA1           01111         goto    EndTastDispatch
                      01112 
0249                  01113 TestTaste_2
0249   3002           01114         movlw   2
024A   0228           01115         subwf   TASTE_AKT,W
024B   1D03           01116         btfss   STATUS,Z
024C   2A4F           01117         goto    TestTaste_3
                      01118 
024D   22CC           01119         call    Farbprogramm_2
024E   2AA1           01120         goto    EndTastDispatch
                      01121 
                      01122 
024F                  01123 TestTaste_3
024F   3003           01124         movlw   3
0250   0228           01125         subwf   TASTE_AKT,W
0251   1D03           01126         btfss   STATUS,Z
0252   2A55           01127         goto    TestTaste_4
                      01128 
0253   22D5           01129         call    Farbprogramm_3
0254   2AA1           01130         goto    EndTastDispatch
0255                  01131 TestTaste_4
0255   3004           01132         movlw   4
0256   0228           01133         subwf   TASTE_AKT,W
0257   1D03           01134         btfss   STATUS,Z
0258   2A5B           01135         goto    TestTaste_5
                      01136 
0259   22DE           01137         call    Farbprogramm_4
025A   2AA1           01138         goto    EndTastDispatch
025B                  01139 TestTaste_5
                      01140 
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

025B   2AA1           01141         goto    EndTastDispatch
                      01142 
                      01143 
                      01144 ;--------------------- Stellung HEX=0---------------
025C                  01145 TestHex_0
025C   0868           01146         movfw   HEX_AKT
025D   390F           01147         andlw   0xf
025E   3C00           01148         sublw   0
025F   1D03           01149         btfss   STATUS,Z
0260   2AA1           01150         goto    EndTastDispatch
                      01151 
0261   1FA8           01152         btfss   TASTE_AKT,7
0262   0008           01153         return
                      01154 
0263   13A8           01155         bcf     TASTE_AKT,7
0264   1328           01156         bcf     TASTE_AKT,6
0265   0828           01157         movfw   TASTE_AKT
                      01158 
0266   3C00           01159         sublw   0
0267   1903           01160         btfsc   STATUS,Z
0268   0008           01161         return  
                      01162 
0269   0828           01163         movfw   TASTE_AKT
026A   3C09           01164         sublw   0x9
026B   1C03           01165         btfss   STATUS,C
026C   2A70           01166         goto    TestTaste_null
                      01167 
                      01168 ;Taste 1-9
026D   0828           01169         movfw   TASTE_AKT
026E   22B0           01170         call    AddTastBuff
026F   2AA1           01171         goto    EndTastDispatch
                      01172 
0270                  01173 TestTaste_null
                      01174 
0270   300A           01175         movlw   0xa
0271   0228           01176         subwf   TASTE_AKT,W
0272   1D03           01177         btfss   STATUS,Z
0273   2A77           01178         goto    TestTaste_plus
0274   3000           01179         movlw   0
0275   22B0           01180         call    AddTastBuff
                      01181 
0276   2AA1           01182         goto    EndTastDispatch
                      01183 
                      01184 
0277                  01185 TestTaste_plus
0277   302B           01186         movlw   "+"
0278   0228           01187         subwf   TASTE_AKT,W
0279   1D03           01188         btfss   STATUS,Z
027A   2A9B           01189         goto    TestTaste_C
                      01190 
027B   22A2           01191         call    AtoiDec
027C   00B8           01192         movwf   ACC2_L
027D   01B5           01193         clrf    ACC1_L
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

027E   01B4           01194         clrf    ACC1_H
027F   01B7           01195         clrf    ACC2_H
0280   3004           01196         movlw   4
0281   00AB           01197         movwf   TEMP
0282   2326           01198         call    AddAccRep
0283   30A0           01199         movlw   FARBTAB
0284   0735           01200         addwf   ACC1_L,W
0285   0084           01201         movwf   FSR
0286   0824           01202         movfw   AD0                             ; rot
0287   1683           01203         bsf     STATUS,RP0                      ; Bank 1
0288   0080           01204         movwf   INDF
0289   1283           01205         bcf     STATUS,RP0                      ; Bank 0
028A   0A84           01206         incf    FSR,F
                      01207 
028B   0825           01208         movfw   AD1                             ; grün
028C   1683           01209         bsf     STATUS,RP0                      ; Bank 1
028D   0080           01210         movwf   INDF
028E   1283           01211         bcf     STATUS,RP0                      ; Bank 0
028F   0A84           01212         incf    FSR,F
                      01213 
0290   0826           01214         movfw   AD2                             ; blau
0291   1683           01215         bsf     STATUS,RP0                      ; Bank 1
0292   0080           01216         movwf   INDF
0293   1283           01217         bcf     STATUS,RP0                      ; Bank 
0294   0A84           01218         incf    FSR,F
                      01219 
0295   0827           01220         movfw   AD3                             ; Speed
0296   1683           01221         bsf     STATUS,RP0                      ; Bank 1
0297   0080           01222         movwf   INDF
0298   1283           01223         bcf     STATUS,RP0                      ; Bank 
0299   0A84           01224         incf    FSR,F
                      01225 
                      01226 
                      01227 
029A   2AA1           01228         goto    EndTastDispatch
                      01229 
029B                  01230 TestTaste_C
029B   3023           01231         movlw   0x23
029C   0228           01232         subwf   TASTE_AKT,W
029D   1D03           01233         btfss   STATUS,Z
029E   2AA1           01234         goto    EndTastDispatch                 ; bzw. zu Test_nächste Taste
                      01235 
029F   251B           01236         call    EEpromWrite
                      01237 
02A0   2AA1           01238         goto    EndTastDispatch
                      01239 
02A1                  01240 EndTastDispatch
02A1   0008           01241         return
                      01242 
                      01243 ;---------------------------
02A2                  01244 AtoiDec         ; wandelt TasBuff in Integer und decrementiert um
02A2   3030           01245         movlw   0x30
02A3   0240           01246         subwf   TASTBUFF,W
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02A4   00AB           01247         movwf   TEMP
02A5   01B5           01248         clrf    ACC1_L
                      01249 
02A6   01B4           01250         clrf    ACC1_H
02A7   300A           01251         movlw   0xa
02A8   00B8           01252         movwf   ACC2_L
02A9   01B7           01253         clrf    ACC2_H
02AA   2326           01254         call    AddAccRep
02AB   3030           01255         movlw   0x30
02AC   0241           01256         subwf   TASTBUFF+1,W
02AD   03B5           01257         decf    ACC1_L,F        ; !!!!
02AE   0735           01258         addwf   ACC1_L,W
02AF   0008           01259         return
                      01260 ;---------------------------
02B0                  01261 AddTastBuff
02B0   3E30           01262         addlw   0x30
02B1   00AB           01263         movwf   TEMP
                      01264 
02B2   086E           01265         movfw   TASTBUFF_IDX
02B3   3C02           01266         sublw   2
02B4   1D03           01267         btfss   STATUS,Z
02B5   2AB8           01268         goto    NoIdxReset
02B6   01EE           01269         clrf    TASTBUFF_IDX
02B7   2511           01270         call    ClearTastBuff
02B8                  01271 NoIdxReset
02B8   086E           01272         movfw   TASTBUFF_IDX
02B9   3E40           01273         addlw   TASTBUFF
02BA   0084           01274         movwf   FSR
                      01275 
02BB   082B           01276         movfw   TEMP
02BC   0080           01277         movwf   INDF    
02BD   0AEE           01278         incf    TASTBUFF_IDX,F
02BE   3040           01279         movlw   TASTBUFF
02BF   20E5           01280         call    MoveToDispBuff
02C0   1531           01281         bsf     DISP_Z_FLAG,2
02C1   2497           01282         call    display
                      01283         
02C2   0008           01284         return
                      01285 
                      01286 ;---------------------------
                      01287 
02C3                  01288 Farbprogramm_1
02C3   3000           01289         movlw   0x0
02C4   2545           01290         call    EEpromRead
                      01291                 
02C5   01EA           01292         clrf    FARB_IDX_AKT
02C6   01EB           01293         clrf    FARB_IDX_NEXT
02C7   0AEB           01294         incf    FARB_IDX_NEXT,F
02C8   01AF           01295         clrf    SEKUNDEN_COUNT
02C9   01A3           01296         clrf    TIM2_10MS
02CA   01E6           01297         clrf    TIMECOUNT
                      01298 
                      01299 
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01300 
02CB   0008           01301         return
                      01302 
                      01303 
02CC                  01304 Farbprogramm_2
02CC   3040           01305         movlw   0x40
02CD   2545           01306         call    EEpromRead
02CE   01EA           01307         clrf    FARB_IDX_AKT
02CF   01EB           01308         clrf    FARB_IDX_NEXT
02D0   0AEB           01309         incf    FARB_IDX_NEXT,F
02D1   01AF           01310         clrf    SEKUNDEN_COUNT
02D2   01A3           01311         clrf    TIM2_10MS
02D3   01E6           01312         clrf    TIMECOUNT
                      01313 
02D4   0008           01314         return
                      01315 
                      01316 
                      01317 
                      01318 
02D5                  01319 Farbprogramm_3
02D5   3080           01320         movlw   0x80
02D6   2545           01321         call    EEpromRead
02D7   01EA           01322         clrf    FARB_IDX_AKT
02D8   01EB           01323         clrf    FARB_IDX_NEXT
02D9   0AEB           01324         incf    FARB_IDX_NEXT,F
02DA   01AF           01325         clrf    SEKUNDEN_COUNT
02DB   01A3           01326         clrf    TIM2_10MS
02DC   01E6           01327         clrf    TIMECOUNT
02DD   0008           01328         return
                      01329 
02DE                  01330 Farbprogramm_4
02DE   30C0           01331         movlw   0xC0
02DF   2545           01332         call    EEpromRead
02E0   01EA           01333         clrf    FARB_IDX_AKT
02E1   01EB           01334         clrf    FARB_IDX_NEXT
02E2   0AEB           01335         incf    FARB_IDX_NEXT,F
02E3   01AF           01336         clrf    SEKUNDEN_COUNT
02E4   01A3           01337         clrf    TIM2_10MS
02E5   01E6           01338         clrf    TIMECOUNT
02E6   0008           01339         return
                      01340 
                      01341 
                      01342 
                      01343 ;
                      01344 
                      01345 ;===================================================
                      01346 ; AddAcc
                      01347 ; Addiert die 16Bit Accus ACC1 und ACC1 
                      01348 ; Ergebnis in ACC1
                      01349 ; ACC2 bleibt unverändert
                      01350 ; Caryy wird gesetzt
                      01351 ;===================================================
02E7                  01352 AddAcc
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01353 
02E7   0838           01354         movfw   ACC2_L
02E8   07B5           01355         addwf   ACC1_L,F
02E9   1803           01356         btfsc   STATUS,C        
02EA   0AB4           01357         incf    ACC1_H,F
                      01358         
02EB   0837           01359         movfw   ACC2_H
02EC   07B4           01360         addwf   ACC1_H,F
                      01361         
02ED   0008           01362         return
                      01363 ;===================================================
                      01364 ; dAddAcc
                      01365 ; Addiert die 24Bit Accus ACC1 und ACC2 
                      01366 ; Ergebnis in ACC1
                      01367 ; ACC2 bleibt unverändert
                      01368 ; Caryy wird gesetzt
                      01369 ;===================================================
02EE                  01370 dAddAcc
                      01371 
02EE   0838           01372         movfw   ACC2_L
02EF   07B5           01373         addwf   ACC1_L,F
02F0   1C03           01374         btfss   STATUS,C
02F1   2AF6           01375         goto    dAddAcc1        
02F2   0AB4           01376         incf    ACC1_H,F
02F3   08B4           01377         movf    ACC1_H,F                ; = 0?
02F4   1903           01378         btfsc   STATUS,Z
02F5   0AB3           01379         incf    ACC1_0,f        
                      01380         
02F6                  01381 dAddAcc1
02F6   0837           01382         movfw   ACC2_H
02F7   07B4           01383         addwf   ACC1_H,F
02F8   1803           01384         btfsc   STATUS,C        
02F9   0AB3           01385         incf    ACC1_0,F
                      01386         
02FA   0836           01387         movfw   ACC2_0
02FB   07B3           01388         addwf   ACC1_0,F
                      01389         
02FC   0008           01390         return
                      01391 ;===================================================
                      01392 ; SubAcc
                      01393 ; Subtrahiert die 16Bit Accus ACC1 und ACC1 
                      01394 ; Ergebnis in ACC1
                      01395 ; ACC2 bleibt unverändert
                      01396 ;===================================================
02FD                  01397 SubAcc
02FD   10B9           01398         bcf     TEMPFLAG,1
02FE   0838           01399         movfw   ACC2_L
02FF   02B5           01400         subwf   ACC1_L,F
0300   1803           01401         btfsc   STATUS,C
0301   2B06           01402         goto    SubAcc1 
0302   08B4           01403         movf    ACC1_H,F
0303   1903           01404         btfsc   STATUS,Z
0304   14B9           01405         bsf     TEMPFLAG,1
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0305   03B4           01406         decf    ACC1_H,F
                      01407 
0306                  01408 SubAcc1
0306   0837           01409         movfw   ACC2_H
0307   02B4           01410         subwf   ACC1_H,F
                      01411         
0308   18B9           01412         btfsc   TEMPFLAG,1
0309   1003           01413         bcf     STATUS,C
                      01414         
030A   0008           01415         return
                      01416 
                      01417 ;===================================================
                      01418 ; dSubAcc
                      01419 ; Subtrahiert die 24Bit Accus ACC1 und ACC1 
                      01420 ; Ergebnis in ACC1
                      01421 ; ACC2 bleibt unverändert
                      01422 ;===================================================
030B                  01423 dSubAcc
030B   10B9           01424         bcf     TEMPFLAG,1
030C   0838           01425         movfw   ACC2_L
030D   02B5           01426         subwf   ACC1_L,F
030E   1803           01427         btfsc   STATUS,C
030F   2B19           01428         goto    dSubAcc1        
0310   03B4           01429         decf    ACC1_H,F
0311   30FF           01430         movlw   0xff
0312   0234           01431         subwf   ACC1_H,W
0313   1D03           01432         btfss   STATUS,Z
0314   2B19           01433         goto    dSubAcc1
0315   08B3           01434         movf    ACC1_0,F
0316   1903           01435         btfsc   STATUS,Z
0317   14B9           01436         bsf     TEMPFLAG,1
0318   03B3           01437         decf    ACC1_0,F
                      01438         
                      01439 
0319                  01440 dSubAcc1
0319   0837           01441         movfw   ACC2_H
031A   02B4           01442         subwf   ACC1_H,F
031B   1803           01443         btfsc   STATUS,C
031C   2B21           01444         goto    dSubAcc2        
031D   08B3           01445         movf    ACC1_0,F
031E   1903           01446         btfsc   STATUS,Z
031F   14B9           01447         bsf     TEMPFLAG,1
0320   03B3           01448         decf    ACC1_0,F
                      01449 
                      01450 
                      01451 
0321                  01452 dSubAcc2
0321   0836           01453         movfw   ACC2_0
0322   02B3           01454         subwf   ACC1_0,F
                      01455         
0323   18B9           01456         btfsc   TEMPFLAG,1
0324   1003           01457         bcf     STATUS,C
                      01458         
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0325   0008           01459         return
                      01460 
                      01461 
                      01462 ;===================================================
                      01463 ; AddAccRep
                      01464 ; Addiert die 16Bit Accus ACC1 und ACC1 n-mal
                      01465 ; n steht in TEMP, TEMP wird verändert
                      01466 ; Ergebnis in ACC1
                      01467 ; ACC2 bleibt unverändert
                      01468 ;===================================================
0326                  01469 AddAccRep
                      01470 
0326   08AB           01471         movf    TEMP,F
0327   1903           01472         btfsc   STATUS,Z
0328   2B2F           01473         goto    EndAccAdd
0329   0838           01474         movfw   ACC2_L
032A   07B5           01475         addwf   ACC1_L,F
032B   1803           01476         btfsc   STATUS,C        
032C   0AB4           01477         incf    ACC1_H,F
                      01478 
032D   03AB           01479         decf    TEMP,F
032E   2B26           01480         goto    AddAccRep
032F                  01481 EndAccAdd
032F   0008           01482         return
                      01483 ;===================================================
                      01484 ; SubAccRep
                      01485 ; Subtrahiert die 16Bit Accus ACC1 und ACC1 n-mal (ACC1-ACC2)
                      01486 ; n steht in TEMP, TEMP wird verändert
                      01487 ; Ergebnis in ACC1
                      01488 ; ACC2 bleibt unverändert
                      01489 ;===================================================
0330                  01490 SubAccRep
0330   08AB           01491         movf    TEMP,F
0331   1903           01492         btfsc   STATUS,Z
0332   2B39           01493         goto    EndAccSub
0333   0838           01494         movfw   ACC2_L
0334   02B5           01495         subwf   ACC1_L,F
0335   1C03           01496         btfss   STATUS,C        
0336   03B4           01497         decf    ACC1_H,F
                      01498 
0337   03AB           01499         decf    TEMP,F
0338   2B30           01500         goto    SubAccRep
0339                  01501 EndAccSub
0339   0008           01502         return
                      01503 
                      01504 
                      01505 ;===================================================
                      01506 ; sutoa  (short unsigend to ASCII) wandelt 8bit unsigned nach ASCII
                      01507 ; Quelle ist in TEMP
                      01508 ; Ziel ist in FSR
                      01509 ; benutze Register: TEMP und TEMP1 
                      01510 ;===================================================
033A                  01511 sutoa
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

033A   082B           01512         movfw   TEMP
033B   00AC           01513         movwf   TEMP1
033C   3030           01514         movlw   0x30            ; ASCII 0
033D   0080           01515         movwf   INDF
033E   3064           01516         movlw   d'100'
033F                  01517 sutoa1                                  ; Hunderter-Schleife
033F   02AB           01518         subwf   TEMP,F
0340   1C03           01519         btfss   STATUS,C
0341   2B44           01520         goto    sutoa2
0342   0A80           01521         incf    INDF,F
0343   2B3F           01522         goto    sutoa1
0344                  01523 sutoa2                                  ; 
0344   07AB           01524         addwf   TEMP,F          ; einmal zuviel subtrahiert
0345   0A84           01525         incf    FSR,f                   ; nächste Stelle im Display-Ram
0346   3030           01526         movlw   0x30            ; ASCII 0
0347   0080           01527         movwf   INDF
0348   300A           01528         movlw   d'10'
0349                  01529 sutoa3                                  ; Zehner Schleife
0349   02AB           01530         subwf   TEMP,F
034A   1C03           01531         btfss   STATUS,C
034B   2B4E           01532         goto    sutoa4
034C   0A80           01533         incf    INDF,F
034D   2B49           01534         goto    sutoa3
034E                  01535 sutoa4
034E   07AB           01536         addwf   TEMP,F          ; einmal zuviel subtrahiert
034F   3030           01537         movlw   0x30
0350   072B           01538         addwf   TEMP,W
0351   0A84           01539         incf    FSR,f
0352   0080           01540         movwf   INDF
                      01541 
0353   0008           01542         return
                      01543 
                      01544 ;===================================================
                      01545 ; lutoa  (long unsigend to ASCII) wandelt 16bit unsigned nach ASCII
                      01546 ; Quelle ist in ACC1 (wird überschrieben)
                      01547 ; Ziel ist in FSR
                      01548 ; benutze Register: ACC2 
                      01549 ;===================================================
0354                  01550 lutoa
0354   0084           01551         movwf   FSR
0355   3030           01552         movlw   0x30            ; ASCII 0
0356   0080           01553         movwf   INDF
0357   3027           01554         movlw   HIGH d'10000'
0358   00B7           01555         movwf   ACC2_H
0359   3010           01556         movlw   LOW d'10000'
035A   00B8           01557         movwf   ACC2_L
                      01558 
035B                  01559 lutoa1                                  ; 10000er-Schleife
035B   22FD           01560         call    SubAcc          ; 16Bit-Subtraktion
035C   1C03           01561         btfss   STATUS,C
035D   2B60           01562         goto    lutoa2
035E   0A80           01563         incf    INDF,F
035F   2B5B           01564         goto    lutoa1
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0360                  01565 lutoa2                                  ; 
0360   22E7           01566         call    AddAcc          ; einmal zuviel subtrahiert
0361                  01567 lutoa_sub
0361   0A84           01568         incf    FSR,f                   ; nächste Stelle im Display-Ram
0362   3030           01569         movlw   0x30            ; ASCII 0
0363   0080           01570         movwf   INDF
0364   3003           01571         movlw   HIGH d'1000'
0365   00B7           01572         movwf   ACC2_H
0366   30E8           01573         movlw   LOW d'1000'
0367   00B8           01574         movwf   ACC2_L
                      01575 
0368                  01576 lutoa3                                  ; Tausender Schleife
0368   22FD           01577         call    SubAcc
0369   1C03           01578         btfss   STATUS,C
036A   2B6D           01579         goto    lutoa4
036B   0A80           01580         incf    INDF,F
036C   2B68           01581         goto    lutoa3
036D                  01582 lutoa4
036D   22E7           01583         call    AddAcc          ; einmal zuviel subtrahiert
036E   0A84           01584         incf    FSR,f                   ; nächste Stelle im Display-Ram
036F   3030           01585         movlw   0x30            ; ASCII 0
0370   0080           01586         movwf   INDF
0371   3000           01587         movlw   HIGH d'100'
0372   00B7           01588         movwf   ACC2_H
0373   3064           01589         movlw   LOW d'100'
0374   00B8           01590         movwf   ACC2_L
                      01591 
0375                  01592 lutoa5                                  ; Hunderter Schleife
0375   22FD           01593         call    SubAcc
0376   1C03           01594         btfss   STATUS,C
0377   2B7A           01595         goto    lutoa6
0378   0A80           01596         incf    INDF,F
0379   2B75           01597         goto    lutoa5
037A                  01598 lutoa6
037A   22E7           01599         call    AddAcc          ; einmal zuviel subtrahiert
037B   0A84           01600         incf    FSR,f                   ; nächste Stelle im Display-Ram
037C   3030           01601         movlw   0x30            ; ASCII 0
037D   0080           01602         movwf   INDF
037E   3000           01603         movlw   HIGH d'10'
037F   00B7           01604         movwf   ACC2_H
0380   300A           01605         movlw   LOW d'10'
0381   00B8           01606         movwf   ACC2_L
                      01607 
0382                  01608 lutoa7                                  ; Zehner Schleife
0382   22FD           01609         call    SubAcc
0383   1C03           01610         btfss   STATUS,C
0384   2B87           01611         goto    lutoa8
0385   0A80           01612         incf    INDF,F
0386   2B82           01613         goto    lutoa7
                      01614 
0387                  01615 lutoa8
                      01616 
0387   22E7           01617         call    AddAcc          ; einmal zuviel subtrahiert
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0388   3030           01618         movlw   0x30
0389   0735           01619         addwf   ACC1_L,W
038A   0A84           01620         incf    FSR,f
038B   0080           01621         movwf   INDF
                      01622 
038C   0008           01623         return
                      01624 
                      01625 
                      01626 ;===================================================
                      01627 ; Dutoa  (long unsigend to ASCII) wandelt 16bit unsigned nach ASCII
                      01628 ; Quelle ist in ACC1 (wird überschrieben)
                      01629 ; Ziel ist in FSR
                      01630 ; benutze Register: ACC2 
                      01631 ;===================================================
038D                  01632 dutoa
038D   0084           01633         movwf   FSR
038E   3030           01634         movlw   0x30            ; ASCII 0
038F   0080           01635         movwf   INDF
0390   3001           01636         movlw   0x1
0391   00B6           01637         movwf   ACC2_0
0392   3086           01638         movlw   0x86
0393   00B7           01639         movwf   ACC2_H
0394   30A0           01640         movlw   0xa0            ; 0x186A0 = 100.000
0395   00B8           01641         movwf   ACC2_L
                      01642 
0396                  01643 dutoa1                                  ; 100000er-Schleife
0396   230B           01644         call    dSubAcc         ; 16Bit-Subtraktion
0397   1C03           01645         btfss   STATUS,C
0398   2B9B           01646         goto    dutoa2
0399   0A80           01647         incf    INDF,F
039A   2B96           01648         goto    dutoa1
039B                  01649 dutoa2                                  ; 
039B   22EE           01650         call    dAddAcc         ; einmal zuviel subtrahiert
039C   0A84           01651         incf    FSR,f                   ; nächste Stelle im Display-Ram
                      01652 
                      01653 
                      01654 
039D   3030           01655         movlw   0x30            ; ASCII 0
039E   0080           01656         movwf   INDF
039F   01B6           01657         clrf    ACC2_0
03A0   3027           01658         movlw   HIGH d'10000'
03A1   00B7           01659         movwf   ACC2_H
03A2   3010           01660         movlw   LOW d'10000'
03A3   00B8           01661         movwf   ACC2_L
                      01662 
03A4                  01663 dutoa3                                  ; 10000er-Schleife
03A4   230B           01664         call    dSubAcc         ; 16Bit-Subtraktion
03A5   1C03           01665         btfss   STATUS,C
03A6   2BA9           01666         goto    dutoa4
03A7   0A80           01667         incf    INDF,F
03A8   2BA4           01668         goto    dutoa3
03A9                  01669 dutoa4
03A9   22EE           01670         call    dAddAcc         ; einmal zuviel subtrahiert
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01671 
03AA   2361           01672         call    lutoa_sub
                      01673 
                      01674 
                      01675 
03AB   0008           01676         return
                      01677 
                      01678 
                      01679 
                      01680 ;===================================================
                      01681 ;  TAST-SCAN
                      01682 ;===================================================
                      01683 
03AC                  01684 TastScan
03AC   0868           01685         movfw   HEX_AKT
03AD   390F           01686         andlw   0xf
03AE   3C02           01687         sublw   2                               ; Hex = 2 --> Gateway-Funktion
03AF   1903           01688         btfsc   STATUS,Z
03B0   0008           01689         return
                      01690 
                      01691 
03B1   23CF           01692         call    TastScan1
03B2   082B           01693         movfw   TEMP                    ; Ergebnis 1. Scan... 
03B3   00AC           01694         movwf   TEMP1                   ; ... zwischenspeichern
                      01695         
03B4   0828           01696         movfw   TASTE_AKT
03B5   390F           01697         andlw   0xf
03B6   02AB           01698         subwf   TEMP,F  
03B7   1903           01699         btfsc   STATUS,Z
03B8   2BCE           01700         goto    EndScan
                      01701 
03B9   3001           01702         movlw   1                               ; 30msec
03BA   00A2           01703         movwf   TIM1_10MS
03BB                  01704 TstScLoop
03BB   178B           01705         bsf     INTCON,GIE
03BC   08A2           01706         movf    TIM1_10MS,F
03BD   1D03           01707         btfss   STATUS,Z
                      01708 
03BE   2BBB           01709         goto    TstScLoop
                      01710 
03BF   23CF           01711         call    TastScan1
                      01712 
03C0   082B           01713         movfw   TEMP
03C1   022C           01714         subwf   TEMP1,W
03C2   1D03           01715         btfss   STATUS,Z                ; Z= 2 identische Scans
03C3   2BCE           01716         goto    EndScan                 ; 2 Scans lieferten keine gleichen Ergebnisse
                      01717 
03C4   0828           01718         movfw   TASTE_AKT
03C5   390F           01719         andlw   0xf
03C6   022B           01720         subwf   TEMP,W
03C7   1D03           01721         btfss   STATUS,Z                ; Z=Alte Taste noch immer gedrückt-> Repeat
03C8   2BCB           01722         goto    NeueTaste
03C9                  01723 RepeatTaste
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03C9   1728           01724         bsf     TASTE_AKT,6
03CA   2BCE           01725         goto    EndScan
                      01726 
03CB                  01727 NeueTaste
                      01728 
03CB   082B           01729         movfw   TEMP
03CC   00A8           01730         movwf   TASTE_AKT       
03CD   17A8           01731         bsf     TASTE_AKT,7             ; = Flag "Taste gedrückt"
                      01732 
03CE                  01733 EndScan
03CE   0008           01734         return
                      01735 
                      01736 ;-------------------
03CF                  01737 TastScan1               ; setzt nacheinander die drei Ausgänge
                      01738 
03CF   3000           01739         movlw   0x0
03D0   0586           01740         andwf   PORT_TASTOUT,f          ; Alle Scan-Lines High
                      01741         
03D1   3000           01742         movlw   0x0
03D2   00AB           01743         movwf   TEMP
03D3   3001           01744         movlw   0x1
03D4   0486           01745         iorwf   PORT_TASTOUT,F          ; Bit0 für ScanOut auf L
03D5   23FE           01746         call    CheckTastIn
03D6   1D03           01747         btfss   STATUS,Z
03D7   2BF6           01748         goto    EndTast
                      01749         
03D8   3000           01750         movlw   0x0
03D9   0586           01751         andwf   PORT_TASTOUT,f          ; Alle Scan-Lines High
03DA   3004           01752         movlw   0x04
03DB   00AB           01753         movwf   TEMP
03DC   3002           01754         movlw   0x2
03DD   0486           01755         iorwf   PORT_TASTOUT,F          ; Bit0 für ScanOut auf L
03DE   23FE           01756         call    CheckTastIn
03DF   1D03           01757         btfss   STATUS,Z
03E0   2BF6           01758         goto    EndTast
                      01759 
03E1   3000           01760         movlw   0x0
03E2   0586           01761         andwf   PORT_TASTOUT,f          ; Alle Scan-Lines High
03E3   3008           01762         movlw   0x08
03E4   00AB           01763         movwf   TEMP
03E5   3004           01764         movlw   0x4
03E6   0486           01765         iorwf   PORT_TASTOUT,F          ; Bit0 für ScanOut auf L
03E7   23FE           01766         call    CheckTastIn
03E8   1D03           01767         btfss   STATUS,Z
03E9   2BF6           01768         goto    EndTast
                      01769 
03EA   3000           01770         movlw   0x0
03EB   0586           01771         andwf   PORT_TASTOUT,f          ; Alle Scan-Lines High
03EC   300C           01772         movlw   0xC
03ED   00AB           01773         movwf   TEMP
03EE   3008           01774         movlw   0x8
03EF   0486           01775         iorwf   PORT_TASTOUT,F          ; Bit0 für ScanOut auf L
03F0   23FE           01776         call    CheckTastIn
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03F1   1D03           01777         btfss   STATUS,Z
03F2   2BF6           01778         goto    EndTast
                      01779 
                      01780         
03F3   3000           01781         movlw   0
03F4   00AB           01782         movwf   TEMP
03F5   00AC           01783         movwf   TEMP1
03F6                  01784 EndTast
03F6   07AB           01785         addwf   TEMP,F
03F7   3007           01786         movlw   HIGH TasteUmsetzen
03F8   008A           01787         movwf   PCLATH
                      01788 
03F9   082B           01789         movfw   TEMP
                      01790         
03FA   2755           01791         call    TasteUmsetzen
03FB   00AB           01792         movwf   TEMP
03FC   00AC           01793         movwf   TEMP1
                      01794 
03FD   0008           01795         return
                      01796 
                      01797 ;-------------------
                      01798 
03FE                  01799 CheckTastIn             ; prüft die 3 Eingänge
                      01800 
03FE   3000           01801         movlw   0x00
03FF   1B88           01802         btfsc   PORT_TASTIN,7
0400   3001           01803         movlw   1
0401   1B08           01804         btfsc   PORT_TASTIN,6
0402   3002           01805         movlw   2
0403   1A88           01806         btfsc   PORT_TASTIN,5
0404   3003           01807         movlw   3
0405   1A08           01808         btfsc   PORT_TASTIN,4
0406   3004           01809         movlw   4
0407   3800           01810         iorlw   0               ; Test WREG auf 0
0408   0008           01811         return  
                      01812 
                      01813 ;-----------------------
                      01814 
                      01815 ;===================================================
                      01816 ;  HexScan
                      01817 ;===================================================
                      01818 
0409                  01819 HexScan
0409   0807           01820         movfw   PORTC
040A   3A0F           01821         xorlw   0xf     ; wg. Invertierung durch Pull-Ups
040B   390F           01822         andlw   0xf
040C   00E8           01823         movwf   HEX_AKT 
040D   0269           01824         subwf   HEX_LAST,W
040E   1903           01825         btfsc   STATUS,Z
040F   0008           01826         return                          ; keine Änderung
0410   0868           01827         movfw   HEX_AKT
0411   00E9           01828         movwf   HEX_LAST        
                      01829 
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01830 
0412   3000           01831         movlw   0x0
0413   0268           01832         subwf   HEX_AKT,w
0414   1D03           01833         btfss   STATUS,Z
0415   2C1E           01834         goto    TestHex1
                      01835 
0416   2507           01836         call    ClearDispBuff
0417   1531           01837         bsf     DISP_Z_FLAG,2
0418   2497           01838         call    display
0419   14B1           01839         bsf     DISP_Z_FLAG,1
041A   2497           01840         call    display
041B   01EE           01841         clrf    TASTBUFF_IDX
041C   2511           01842         call    ClearTastBuff
041D   0008           01843         return
                      01844 
041E                  01845 TestHex1
041E   3001           01846         movlw   0x1
041F   0268           01847         subwf   HEX_AKT,w
0420   1D03           01848         btfss   STATUS,Z
0421   2C3C           01849         goto    TestHex2
                      01850 
0422   01A3           01851         clrf    TIM2_10MS
0423   01E6           01852         clrf    TIMECOUNT
                      01853 
0424   01EA           01854         clrf    FARB_IDX_AKT
0425   3001           01855         movlw   1
0426   00EB           01856         movwf   FARB_IDX_NEXT
                      01857 
                      01858 
0427   2222           01859         call    LadeSekundenWert
                      01860 
                      01861 
0428   1683           01862         bsf     STATUS,RP0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0429   0820           01863         movfw   FARBTAB
042A   1283           01864         bcf     STATUS,RP0
042B   00A4           01865         movwf   AD0
                      01866 
042C   1683           01867         bsf     STATUS,RP0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
042D   0821           01868         movfw   FARBTAB+1
042E   1283           01869         bcf     STATUS,RP0
042F   00A5           01870         movwf   AD1
                      01871 
                      01872 
0430   1683           01873         bsf     STATUS,RP0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0431   0822           01874         movfw   FARBTAB+2
0432   1283           01875         bcf     STATUS,RP0
0433   00A6           01876         movwf   AD2
                      01877 
0434   2144           01878         call    SendNewColor
0435   20AC           01879         call    DispMainParam
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01880 
0436   01EE           01881         clrf    TASTBUFF_IDX
                      01882 
                      01883 
                      01884 ;       movlw   1
                      01885 ;       movwf   STEP_DATENLESEN
                      01886 
0437   01E6           01887         clrf    TIMECOUNT
0438   2507           01888         call    ClearDispBuff
0439   1531           01889         bsf     DISP_Z_FLAG,2
043A   2497           01890         call    display
                      01891 
043B   0008           01892         return
043C                  01893 TestHex2
043C   3002           01894         movlw   0x2
043D   0268           01895         subwf   HEX_AKT,w
043E   1D03           01896         btfss   STATUS,Z
043F   2C4A           01897         goto    TestHex3
0440   2507           01898         call    ClearDispBuff
0441   14B1           01899         bsf             DISP_Z_FLAG,1
0442   2497           01900         call    display
0443   1531           01901         bsf             DISP_Z_FLAG,2
0444   2497           01902         call    display
0445   209C           01903         call    DispGateway
0446   01EF           01904         clrf    RX_COUNT
0447   081A           01905         movfw   RCREG           ; DUmmy zum Leeren des Rx-Fifos
0448   081A           01906         movfw   RCREG           ; DUmmy zum Leeren des Rx-Fifos
0449   0008           01907         return
044A                  01908 TestHex3        
                      01909 ;       call    DispKeineFunktion
                      01910 
044A   0008           01911         return
                      01912 
                      01913 
                      01914 
                      01915 ;===================================================
                      01916 ;  Wait10ms
                      01917 ;  Übergabe: keine
                      01918 ; Unterprogramm kehrt nach 10msec zurück
                      01919 
044B                  01920 Wait10ms
044B   3001           01921         movlw   1
044C   00A2           01922         movwf   TIM1_10MS
044D                  01923 WaitLoop
044D   08A2           01924         movf    TIM1_10MS,F
044E   1D03           01925         btfss   STATUS,Z
044F   2C4D           01926         goto    WaitLoop
0450   0008           01927         return
                      01928 
                      01929 
                      01930 ;===================================================
                      01931 
                      01932 ;===================================================
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01933 ;  ADconv
                      01934 ;  Übergabe: keine
                      01935 ;  wandelt Kanal 1 und 2, 
                      01936 ;===================================================
0451                  01937 ADconv
                      01938 ;--------  HEX-Drehschalters = 0 ? -------------
0451   0868           01939         movfw   HEX_AKT
0452   390F           01940         andlw   0xf
0453   3C02           01941         sublw   2                       ; Hex =2 --> Gateway-Funktion
0454   1903           01942         btfsc   STATUS,Z
0455   0008           01943         return
                      01944 
                      01945 
                      01946 
0456   0868           01947         movfw   HEX_AKT
0457   390F           01948         andlw   0xf
0458   3C00           01949         sublw   0
0459   1D03           01950         btfss   STATUS,Z
045A   2C83           01951         goto    WandleKanal_3
                      01952 ; --- Kanal 0 -> ROT ----
                      01953 
045B   111F           01954         bcf     ADCON0, CHS0            ; Kanal 0 -> rot
045C   119F           01955         bcf     ADCON0, CHS1    
045D   149F           01956         bsf     ADCON0, GO_DONE         ; Start
045E                  01957 ADLoop1
045E   189F           01958         btfsc   ADCON0, GO_DONE
045F   2C5E           01959         goto    ADLoop1
                      01960 
0460   081E           01961         movfw   ADRESH
0461   00AB           01962         movwf   TEMP                    ; AD-Wert nach TEMP
                      01963 
0462   0224           01964         subwf   AD0,W
0463   1903           01965         btfsc   STATUS,Z
0464   2C68           01966         goto    WandleKanal_1
0465   143F           01967         bsf             AD_STATUS,0                     ; Flag , neuer WERT da
0466   082B           01968         movfw   TEMP
0467   00A4           01969         movwf   AD0
                      01970 
                      01971 ;----- Kanal 1 gruen -----
0468                  01972 WandleKanal_1
0468   151F           01973         bsf     ADCON0, CHS0            ; kanal 1->Grün, 
0469   2560           01974         call    delay_ms1
                      01975 
046A   149F           01976         bsf     ADCON0, GO_DONE         ; Start
046B                  01977 ADLoop2
046B   189F           01978         btfsc   ADCON0, GO_DONE
046C   2C6B           01979         goto    ADLoop2
                      01980 
046D   081E           01981         movfw   ADRESH
046E   00AB           01982         movwf   TEMP                    
                      01983 
046F   0225           01984         subwf   AD1,W
0470   1903           01985         btfsc   STATUS,Z
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0471   2C75           01986         goto    WandleKanal_2
0472   14BF           01987         bsf             AD_STATUS,1                     ; Flag , neuer WERT da
0473   082B           01988         movfw   TEMP
0474   00A5           01989         movwf   AD1
                      01990 
                      01991 ;----- Kanal 2 blau -----
0475                  01992 WandleKanal_2
0475   111F           01993         bcf     ADCON0, CHS0            ;  
0476   159F           01994         bsf     ADCON0, CHS1            ; kanal 2-> Blau, 
0477   2560           01995         call    delay_ms1
                      01996 
0478   149F           01997         bsf     ADCON0, GO_DONE         ; Start
0479                  01998 ADLoop3
0479   189F           01999         btfsc   ADCON0, GO_DONE
047A   2C79           02000         goto    ADLoop3
                      02001 
047B   081E           02002         movfw   ADRESH
047C   00AB           02003         movwf   TEMP                    
                      02004 
047D   0226           02005         subwf   AD2,W
047E   1903           02006         btfsc   STATUS,Z
047F   2C83           02007         goto    WandleKanal_3
0480   153F           02008         bsf             AD_STATUS,2                     ; Flag , neuer WERT da
0481   082B           02009         movfw   TEMP
0482   00A6           02010         movwf   AD2
                      02011 
                      02012 
                      02013 
                      02014 
                      02015 ;----- Kanal 3 Speed -----
0483                  02016 WandleKanal_3
0483   151F           02017         bsf     ADCON0, CHS0            ;  
0484   159F           02018         bsf     ADCON0, CHS1            ; kanal 3->Speed, 
0485   2560           02019         call    delay_ms1
                      02020 
0486   149F           02021         bsf     ADCON0, GO_DONE         ; Start
0487                  02022 ADLoop4
0487   189F           02023         btfsc   ADCON0, GO_DONE
0488   2C87           02024         goto    ADLoop4
                      02025 
0489   081E           02026         movfw   ADRESH
                      02027 
048A   00AB           02028         movwf   TEMP                    
048B   1003           02029         bcf             STATUS,C
048C   0CAB           02030         rrf             TEMP,F
                      02031 
                      02032 ;       movf    TEMP,F  ; Wenn ADRESHH = 0, immer 1 laden
                      02033 ;       btfsc   STATUS,Z
                      02034 ;       bsf     TEMP,0          ;
                      02035 
048D   082B           02036         movfw   TEMP
                      02037 
048E   0227           02038         subwf   AD3,W
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

048F   1903           02039         btfsc   STATUS,Z
0490   2C94           02040         goto    EndAD
0491   15BF           02041         bsf             AD_STATUS,3                     ; Flag , neuer WERT da
0492   082B           02042         movfw   TEMP
0493   00A7           02043         movwf   AD3
                      02044 
                      02045 
                      02046 
0494                  02047 EndAD
0494   111F           02048         bcf             ADCON0, CHS0    
0495   119F           02049         bcf             ADCON0, CHS1    
                      02050 
                      02051 
0496   0008           02052         return
                      02053 
                      02054 
                      02055 
                      02056 
                      02057 
                      02058 
                      02059 
                      02060 
                      02061 
                      02062 ;================ D I S P L A Y =================================
                      02063 
                      02064 ; ***************************************************************************
0497                  02065 display
                      02066 ;       btfss   DISP_STAT,3             ; soll ausgegeben werden?
                      02067 ;       return
                      02068 
0497   11B2           02069         bcf             DISP_STAT,3
0498   1F32           02070         btfss   DISP_STAT,6             ; Anzeigen oder ausschalten
0499   24CE           02071         call    display_on
                      02072 
                      02073 ; welche Zeile soll geschrieben werden?
                      02074 
049A   1831           02075         btfsc   DISP_Z_FLAG,0           ; Zeile 1
049B   24A3           02076         call    display_z1
049C   18B1           02077         btfsc   DISP_Z_FLAG,1           ; Zeile 2
049D   24A7           02078         call    display_z2
049E   1931           02079         btfsc   DISP_Z_FLAG,2           ; Zeile 3
049F   24AB           02080         call    display_z3
04A0   19B1           02081         btfsc   DISP_Z_FLAG,3           ; Zeile 4
04A1   24AF           02082         call    display_z4
04A2   0008           02083         return
                      02084 
04A3                  02085 display_z1
04A3   3080           02086         movlw   80              ; DD-Adresse im Display für Zeile 1
04A4   24B3           02087         call    display_zout
04A5   1031           02088         bcf             DISP_Z_FLAG,0
04A6   0008           02089         return
                      02090 
04A7                  02091 display_z2
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

04A7   30C0           02092         movlw   0xc0
04A8   24B3           02093         call    display_zout
04A9   10B1           02094         bcf             DISP_Z_FLAG,1
04AA   0008           02095         return
04AB                  02096 display_z3
04AB   3090           02097         movlw   90              ; DD-Adresse im Display für Zeile 3
04AC   24B3           02098         call    display_zout
04AD   1131           02099         bcf             DISP_Z_FLAG,2
04AE   0008           02100         return
04AF                  02101 display_z4
04AF   30D0           02102         movlw   0xd0            ; DD-Adresse im Display für Zeile 4
04B0   24B3           02103         call    display_zout
04B1   11B1           02104         bcf             DISP_Z_FLAG,3
04B2   0008           02105         return
                      02106 
                      02107 
                      02108 
                      02109 ; ***************************************************************************
                      02110 ; ***************************************************************************
04B3                  02111 display_zout
                      02112 
                      02113 
04B3   1108           02114         bcf     PORTD,2         ; RS = 0
04B4   1008           02115         bcf     PORTD,0         ; R/W = 0
                      02116 
04B5   24ED           02117         call    display_write
                      02118 
                      02119 ; hier 16 Bytes füllen
                      02120 
04B6   3010           02121         movlw   10              ; 16 Zeichen ausgeben
04B7   00B0           02122         movwf   DISP_CNT        
                      02123         
04B8   3050           02124         movlw   50                                      ; Zeilenbuffer im Ram
04B9   0084           02125         movwf   04                                      ;!Indir Addr
                      02126         
04BA                  02127 display_zout0                   ; Display-Zeile beschreiben
04BA   1508           02128         bsf     PORTD,2
04BB   1008           02129         bcf     PORTD,0
04BC   0800           02130         movf    0,0
04BD   24ED           02131         call    display_write
04BE   0A84           02132         incf    04,1
04BF   0BB0           02133         decfsz  DISP_CNT,1
04C0   2CBA           02134         goto    display_zout0
04C1   0008           02135         return
                      02136 
04C2                  02137 display_off
04C2   24C9           02138         call    display_clr
04C3   255E           02139         call    delay_ms
04C4   3008           02140         movlw   b'00001000'     ; Display OFF
04C5   1108           02141         bcf     PORTD,2
04C6   1008           02142         bcf     PORTD,0
04C7   24ED           02143         call    display_write
04C8   0008           02144         return
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02145 
04C9                  02146 display_clr
04C9   3001           02147         movlw   b'00000001'     ; Clear Display
04CA   1108           02148         bcf     PORTD,2
04CB   1008           02149         bcf     PORTD,0
04CC   24ED           02150         call    display_write
04CD   0008           02151         return
                      02152         
04CE                  02153 display_on
04CE   300C           02154         movlw   b'00001100'
04CF   1108           02155         bcf     PORTD,2
04D0   1008           02156         bcf     PORTD,0
04D1   24ED           02157         call    display_write
04D2   0008           02158         return
                      02159 
04D3                  02160 display_CB
04D3   300D           02161         movlw   b'00001101'     ; Cursor blinken lassen
04D4   1108           02162         bcf             PORTD,2
04D5   1008           02163         bcf             PORTD,0
04D6   24ED           02164         call    display_write
04D7   0008           02165         return
                      02166 
04D8                  02167 display_init
04D8   244B           02168         call    Wait10ms
04D9   244B           02169         call    Wait10ms
                      02170 
04DA   30F8           02171         movlw   b'11111000'     ; Bit 9.0..9.2 löschen
04DB   0588           02172         andwf   PORTD,F
                      02173         
04DC   303F           02174         movlw   3F
04DD   24ED           02175         call    display_write
                      02176 
04DE   244B           02177         call    Wait10ms
                      02178 
04DF   303F           02179         movlw   3F
04E0   24ED           02180         call    display_write
                      02181 
04E1   255E           02182         call    delay_ms
                      02183 
04E2   303F           02184         movlw   3F
04E3   24ED           02185         call    display_write
                      02186 
04E4   3038           02187         movlw   b'00111000'     ; ab hier SET-Mode
04E5   24ED           02188         call    display_write
                      02189 
04E6   300C           02190         movlw   b'00001100'     ; Display ON
04E7   24ED           02191         call    display_write
                      02192         
04E8   3001           02193         movlw   b'00000001'     ; Display CLEAR
04E9   24ED           02194         call    display_write
                      02195 
04EA   3006           02196         movlw   b'00000110'     ; ENTER Mode SET Increment
04EB   24ED           02197         call    display_write
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

04EC   0008           02198         return
                      02199 
                      02200 ;***************************************************************************
04ED                  02201 display_write
04ED   00AB           02202         movwf   TEMP
04EE   0186           02203         clrf    PORTB
04EF   1109           02204         bcf             PORTE,2
04F0   1205           02205         bcf             PORTA,4
                      02206 
04F1   182B           02207         btfsc   TEMP,0
04F2   1605           02208         bsf             PORTA,4
04F3   18AB           02209         btfsc   TEMP,1
04F4   1509           02210         bsf             PORTE,2
04F5   192B           02211         btfsc   TEMP,2
04F6   1686           02212         bsf             PORTB,5
04F7   19AB           02213         btfsc   TEMP,3
04F8   1606           02214         bsf             PORTB,4
04F9   1A2B           02215         btfsc   TEMP,4
04FA   1586           02216         bsf             PORTB,3
04FB   1AAB           02217         btfsc   TEMP,5
04FC   1506           02218         bsf             PORTB,2
04FD   1B2B           02219         btfsc   TEMP,6
04FE   1486           02220         bsf             PORTB,1
04FF   1BAB           02221         btfsc   TEMP,7
0500   1406           02222         bsf             PORTB,0
                      02223 
0501   1488           02224         bsf     PORTD,1
0502   0000           02225         nop
0503   0000           02226         nop
0504   1088           02227         bcf     PORTD,1         ; Wert übernehmen
                      02228 
0505   255E           02229         call delay_ms
0506   0008           02230         return
                      02231         
                      02232 ;***************************************************************************
0507                  02233 ClearDispBuff           ; Display buffer (0x50) löschen
0507   3010           02234         movlw   0x10
0508   00AC           02235         movwf   TEMP1
0509   3050           02236         movlw   0x50
050A   0084           02237         movwf   FSR
050B   3020           02238         movlw   0x20    ; Leerzeichen
050C                  02239 CDP
050C   0080           02240         movwf   INDF
050D   0A84           02241         incf    FSR,f
050E   0BAC           02242         decfsz  TEMP1,F
050F   2D0C           02243         goto    CDP
                      02244 
0510   0008           02245         return
                      02246 
                      02247 ;***************************************************************************
0511                  02248 ClearTastBuff           ; Display buffer (0x50) löschen
0511   3010           02249         movlw   0x10
0512   00AC           02250         movwf   TEMP1
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0513   3040           02251         movlw   TASTBUFF
0514   0084           02252         movwf   FSR
0515   3020           02253         movlw   0x20    ; Leerzeichen
0516                  02254 CTB
0516   0080           02255         movwf   INDF
0517   0A84           02256         incf    FSR,f
0518   0BAC           02257         decfsz  TEMP1,F
0519   2D16           02258         goto    CTB
                      02259 
051A   0008           02260         return
                      02261 
                      02262 ;============================================================
                      02263 ; EEpromWErite
                      02264 ; schreibt 64 Byte ab Adresse 0xA0 ins EEprom Adresse 0xC0
                      02265 ;============================================================
                      02266 
051B                  02267 EEpromWrite
051B   30A0           02268         movlw   FARBTAB
051C   00AB           02269         movwf   TEMP            ; SourceAdresse
051D   30C0           02270         movlw   0xC0
051E   00AC           02271         movwf   TEMP1           ; TargetAdresse im EEprom
051F   3040           02272         movlw   d'64'
0520   00AD           02273         movwf   TEMP2           ; COunt
0521   138B           02274         BCF     INTCON,GIE      ;Disable INTs.
                      02275 
0522                  02276 EEPromWriteLoop
0522   1703           02277         BSF     STATUS,RP1      ; Bank 3
0523   1683           02278         BSF     STATUS,RP0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0524   188C           02279         BTFSC   EECON1,WR       ;Wait for write
0525   2D24           02280         GOTO $-1                ;to complete
                      02281 
0526   1303           02282         BCF     STATUS,RP1      ; Bank 0
0527   1283           02283         BCF     STATUS,RP0
0528   082C           02284         MOVFW   TEMP1           ;Adresse im EEprom
0529   1703           02285         BSF     STATUS,RP1      ; BANK 2
                      02286         
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
052A   008D           02287         MOVWF   EEADRL          ;Address to write
                      02288 
                      02289 
052B   1303           02290         BCF     STATUS,RP1      ; Bank 0
052C   1283           02291         BCF     STATUS,RP0
052D   082B           02292         MOVFW   TEMP            ; Daten für EEprom
052E   0084           02293         movwf   FSR
052F   1683           02294         BSF     STATUS,RP0      ; Bank 1
0530   0800           02295         movfw   INDF
0531   1283           02296         BCF     STATUS,RP0      ; Bank 1
0532   1703           02297         BSF     STATUS,RP1      ; BANK 2
                      02298 
                      02299 
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0533   008C           02300         MOVWF   EEDATL          ;to write
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 45


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0534   1683           02301         BSF     STATUS,RP0      ;Bank 3
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0535   138C           02302         BCF     EECON1,EEPGD    ;Point to DATA
                      02303         ;memory
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0536   150C           02304         BSF     EECON1,WREN     ;Enable writes
0537   3055           02305         MOVLW   0x55 ;
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0538   008D           02306         MOVWF   EECON2          ;Write 55h
0539   30AA           02307         MOVLW   0xAA            ;
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
053A   008D           02308         MOVWF   EECON2          ;Write AAh
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
053B   148C           02309         BSF     EECON1,WR       ;Set WR bit to
                      02310         ;begin write
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
053C   110C           02311         BCF     EECON1,WREN     ;Disable writes
                      02312 
                      02313 
053D   1303           02314         BCF     STATUS,RP1      ;
053E   1283           02315         BCF     STATUS,RP0
053F   0AAB           02316         incf    TEMP,F
0540   0AAC           02317         incf    TEMP1,F
Message[305]: Using default destination of 1 (file).
0541   0BAD           02318         decfsz  TEMP2
0542   2D22           02319         goto    EEPromWriteLoop 
                      02320 
0543   178B           02321         BSF     INTCON,GIE      ;Enable INTs.
                      02322 
0544   0008           02323         return
                      02324 
                      02325 
                      02326 ;============================================================
                      02327 ; EEpromRead
                      02328 ; liest 64 Byte ab EEpromAdresse[TEMP]  nach Adresse 0xA0
                      02329 ;============================================================
0545                  02330 EEpromRead
                      02331 ;       movlw   0xC0
0545   00AC           02332         movwf   TEMP1           ; TargetAdresse im EEprom
0546   30A0           02333         movlw   FARBTAB
0547   00AB           02334         movwf   TEMP            ; SourceAdresse
0548   3040           02335         movlw   d'64'
0549   00AD           02336         movwf   TEMP2           ; COunt
054A                  02337 EEPromReadLoop
054A   082B           02338         movfw   TEMP
054B   0084           02339         movwf   FSR
054C   082C           02340         movfw   TEMP1           ; Adresse im EEprom
054D   1703           02341         BSF     STATUS,RP1 ;
054E   1283           02342         BCF     STATUS,RP0 ; Bank 2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
054F   008D           02343         MOVWF   EEADRL ; Address to read
0550   1683           02344         BSF     STATUS,RP0 ; Bank 3
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 46


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0551   138C           02345         BCF     EECON1,EEPGD ; Point to Data
                      02346         ; memory
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0552   140C           02347         BSF     EECON1,RD ; EE Read
0553   1283           02348         BCF     STATUS,RP0 ; Bank 2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0554   080C           02349         MOVF    EEDATL,W ; W = EEDATA
0555   1303           02350         BCF     STATUS,RP1      ;
0556   1683           02351         BSF     STATUS,RP0
0557   0080           02352         movwf   INDF
0558   1283           02353         BCF     STATUS,RP0
                      02354 
0559   0AAB           02355         incf    TEMP,F
055A   0AAC           02356         incf    TEMP1,F
Message[305]: Using default destination of 1 (file).
055B   0BAD           02357         decfsz  TEMP2
055C   2D4A           02358         goto    EEPromReadLoop 
                      02359 
                      02360 
                      02361 
                      02362 
055D   0008           02363         return
                      02364 
                      02365 
                      02366 ;============================================================
                      02367 ; delay_ms
                      02368 ; kehrt anch 1 msec zurück
                      02369 ;============================================================
055E                  02370 delay_ms                        ; delay ca. 1ms
                      02371 ;       clrf    DELAY
055E   3040           02372         movlw   0x40
055F   00BA           02373         movwf   DELAY
0560                  02374 delay_ms1
                      02375 ;       clrwdt
0560   0000           02376         nop
0561   0BBA           02377         decfsz  DELAY,F
                      02378 
0562   2D60           02379         goto    delay_ms1
0563   0008           02380         return
                      02381 
                      02382 ;============================================================
                      02383 ; Datenbereich
                      02384 ;=============================================================
                      02385 ; ***************************************************************************
                      02386 ;       org     0x7d0
                      02387 ; ***************************************************************************
                      02388 
                      02389 
                      02390 
0700                  02391         org 0x700
                      02392 
0700                  02393 DatenKeineFunktion
0700   0782           02394         addwf   2,1
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 47


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02395 
0701   3420           02396         retlw   " "
0702   344B           02397         retlw   "K"
0703   3465           02398         retlw   "e"
0704   3469           02399         retlw   "i"
0705   346E           02400         retlw   "n"
0706   3465           02401         retlw   "e"
0707   3420           02402         retlw   " "
0708   3446           02403         retlw   "F"
0709   3475           02404         retlw   "u"
070A   346E           02405         retlw   "n"
070B   346B           02406         retlw   "k"
070C   3474           02407         retlw   "t"
070D   3469           02408         retlw   "i"
070E   346F           02409         retlw   "o"
070F   346E           02410         retlw   "n"
0710   3420           02411         retlw   " "
                      02412 
                      02413 
0711                  02414 BinToHexTab
0711   0782           02415         addwf   2,1
                      02416 
0712   3430           02417         retlw   "0"
0713   3431           02418         retlw   "1"
0714   3432           02419         retlw   "2"
0715   3433           02420         retlw   "3"
0716   3434           02421         retlw   "4"
0717   3435           02422         retlw   "5"
0718   3436           02423         retlw   "6"
0719   3437           02424         retlw   "7"
071A   3438           02425         retlw   "8"
071B   3439           02426         retlw   "9"
071C   3441           02427         retlw   "A"
071D   3442           02428         retlw   "B"
071E   3443           02429         retlw   "C"
071F   3444           02430         retlw   "D"
0720   3445           02431         retlw   "E"
0721   3446           02432         retlw   "F"
                      02433 
                      02434 
0722                  02435 VersionData
0722   0782           02436         addwf   2,1
                      02437 
0723   3456           02438         retlw   "V"
0724   3431           02439         retlw   "1"
0725   342E           02440         retlw   "."
0726   3432           02441         retlw   "2"
0727   3433           02442         retlw   "3"
0728   3420           02443         retlw   " "
0729   342F           02444         retlw   "/"
072A   3420           02445         retlw   " "
                      02446 
                      02447 
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 48


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

072B   3431           02448         retlw   "1"
072C   3430           02449         retlw   "0"
072D   342E           02450         retlw   "."
072E   3431           02451         retlw   "1"
072F   3430           02452         retlw   "0"
0730   342E           02453         retlw   "."
0731   3430           02454         retlw   "0"
0732   3435           02455         retlw   "5"
                      02456 
0733                  02457 MainParamData
0733   0782           02458         addwf   2,1
                      02459 
0734   3472           02460         retlw   "r"
0735   346F           02461         retlw   "o"
0736   3474           02462         retlw   "t"
0737   3420           02463         retlw   " "
0738   3467           02464         retlw   "g"
0739   3472           02465         retlw   "r"
073A   3420           02466         retlw   " "
                      02467 
                      02468 
073B   3420           02469         retlw   " "
073C   3462           02470         retlw   "b"
073D   346C           02471         retlw   "l"
073E   3420           02472         retlw   " "
073F   3420           02473         retlw   " "
0740   3454           02474         retlw   "T"
0741   3465           02475         retlw   "e"
0742   346D           02476         retlw   "m"
0743   3470           02477         retlw   "p"
                      02478 
0744                  02479 GatewayData
0744   0782           02480         addwf   2,1
                      02481 
0745   3420           02482         retlw   " "
0746   3420           02483         retlw   " "
0747   3420           02484         retlw   " "
0748   3420           02485         retlw   " "
0749   3447           02486         retlw   "G"
074A   3461           02487         retlw   "a"
074B   3474           02488         retlw   "t"
074C   3465           02489         retlw   "e"
                      02490 
                      02491 
074D   3477           02492         retlw   "w"
074E   3461           02493         retlw   "a"
074F   3479           02494         retlw   "y"
0750   3420           02495         retlw   " "
0751   3420           02496         retlw   " "
0752   3420           02497         retlw   " "
0753   3420           02498         retlw   " "
0754   3420           02499         retlw   " "
                      02500 
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 49


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02501 
0755                  02502 TasteUmsetzen
0755   0782           02503         addwf   2,1
                      02504 
0756   3400           02505         retlw   0
0757   342A           02506         retlw   "*"
0758   340A           02507         retlw   0xa             ; die Null!!
0759   3423           02508         retlw   "#"
075A   343F           02509         retlw   "?"
075B   3407           02510         retlw   7
075C   3408           02511         retlw   8
075D   3409           02512         retlw   9
075E   3463           02513         retlw   "c"
075F   3404           02514         retlw   4
0760   3405           02515         retlw   5
0761   3406           02516         retlw   6
0762   342D           02517         retlw   "-"
0763   3401           02518         retlw   1       ; 0xD
0764   3402           02519         retlw   2
0765   3403           02520         retlw   3
0766   342B           02521         retlw   "+"
                      02522 
                      02523 
                      02524 
                      02525 ;*******************************************************************************
                      02526 ;********************** EEPROM Bereich *****************************************
                      02527 ;*******************************************************************************
2100                  02528         org 2100        ; EEPROM Bereich
                      02529 
                      02530 ;       DE      'V','2','F','A','0',' ','1','4','.','0','4','.','2','0','0','5'
2100   0010 0000 0000 02531         DE      0x10,0x0 ,0x0, 0x1
       0001 
2104   0000 0010 0000 02532         DE      0x0 ,0x10,0x0, 0x1
       0001 
2108   0000 0000 0010 02533         DE      0x0 ,0x0 ,0x10,0x0
       0000 
210C   0080 0000 0000 02534         DE      0x80,0x0 ,0x0, 0x1
       0001 
2110   0000 0000 0000 02535         DE      0x0, 0x0 ,0x0, 0x6
       0006 
2114   0080 0000 0000 02536         DE      0x80,0x0 ,0x0, 0x7f
       007F 
                      02537 
                      02538 
                      02539 ;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
                      02540         END
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 50


SYMBOL TABLE
  LABEL                             VALUE 

ACC1_0                            00000033
ACC1_H                            00000034
ACC1_L                            00000035
ACC2_0                            00000036
ACC2_H                            00000037
ACC2_L                            00000038
AD0                               00000024
AD1                               00000025
AD2                               00000026
AD3                               00000027
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000004
ADCS1                             00000005
ADCS2                             00000006
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADLoop1                           0000045E
ADLoop2                           0000046B
ADLoop3                           00000479
ADLoop4                           00000487
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
AD_STATUS                         0000003F
ADconv                            00000451
AN0                               00000000
AN1                               00000001
AN2                               00000002
AN3                               00000003
AN4                               00000004
AN5                               00000005
AN6                               00000006
AN7                               00000007
ANSEL                             00000091
AdDispatch                        00000133
AddAcc                            000002E7
AddAccRep                         00000326
AddDifferenz                      00000220
AddTastBuff                       000002B0
AtoiDec                           000002A2
BF                                00000000
BIASMD                            00000006
BRGH                              00000002
BinToHex                          0000011C
BinToHex8                         000000FB
BinToHex81                        00000100
BinToHexTab                       00000711
C                                 00000000
C1IE                              00000005
C1IF                              00000005
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 51


SYMBOL TABLE
  LABEL                             VALUE 

C1INV                             00000004
C1OUT                             00000006
C2IE                              00000006
C2IF                              00000006
C2INV                             00000005
C2OUT                             00000007
C2SYNC                            00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2H                            0000001C
CCPR2L                            0000001B
CDP                               0000050C
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CIS                               00000003
CKE                               00000006
CKP                               00000004
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON0                            0000009C
CMCON1                            00000097
CREN                              00000004
CS0                               00000002
CS1                               00000003
CSRC                              00000007
CTB                               00000516
CheckTastIn                       000003FE
ClearDispBuff                     00000507
ClearTastBuff                     00000511
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DELAY                             0000003A
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 52


SYMBOL TABLE
  LABEL                             VALUE 

DISP_BUFF                         00000050
DISP_CNT                          00000030
DISP_STAT                         00000032
DISP_Z_FLAG                       00000031
D_A                               00000005
DatenKeineFunktion                00000700
DispGateway                       0000009C
DispGateway_1                     0000009F
DispInitLoop                      0000006F
DispKeineFunktion                 00000123
DispKeineFunktionLoop             00000126
DispMainParam                     000000AC
DispMainParam_1                   000000AF
DispVersion                       0000008C
DispVersion_1                     0000008F
EEADRH                            0000010F
EEADRL                            0000010D
EECON1                            0000018C
EECON2                            0000018D
EEDATH                            0000010E
EEDATL                            0000010C
EEIE                              00000007
EEIF                              00000007
EEPGD                             00000007
EEPromReadLoop                    0000054A
EEPromWriteLoop                   00000522
EERD                              00000000
EEWR                              00000001
EEpromRead                        00000545
EEpromWrite                       0000051B
ETX                               00000003
EndAD                             00000494
EndAccAdd                         0000032F
EndAccSub                         00000339
EndDifferenz                      00000221
EndInt                            00000023
EndScan                           000003CE
EndTast                           000003F6
EndTastDispatch                   000002A1
EndTimer1Int                      00000016
F                                 00000001
FARBTAB                           000000A0
FARB_COUNT                        0000006C
FARB_IDX_AKT                      0000006A
FARB_IDX_NEXT                     0000006B
FARB_SPEICHER_IDX                 0000006D
FERR                              00000002
FSR                               00000004
FarbeSteppen                      000001EC
Farbprogramm_1                    000002C3
Farbprogramm_2                    000002CC
Farbprogramm_3                    000002D5
Farbprogramm_4                    000002DE
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 53


SYMBOL TABLE
  LABEL                             VALUE 

GIE                               00000007
GO_DONE                           00000001
GatewayData                       00000744
HEX1_Dispatch                     00000165
HEX2_Dispatch                     000001C0
HEX_AKT                           00000068
HEX_LAST                          00000069
HTS                               00000002
HexScan                           00000409
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IOC                               00000096
IOC4                              00000004
IOC5                              00000005
IOC6                              00000006
IOC7                              00000007
IOCB                              00000096
IOCB4                             00000004
IOCB5                             00000005
IOCB6                             00000006
IOCB7                             00000007
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRP                               00000007
IRVST                             00000005
ITOA_BUFF                         00000060
Interrupt                         00000008
KeinSwap                          00000214
LCDA                              00000005
LCDCON                            00000107
LCDDATA0                          00000110
LCDDATA1                          00000111
LCDDATA10                         0000011A
LCDDATA11                         0000011B
LCDDATA2                          00000112
LCDDATA3                          00000113
LCDDATA4                          00000114
LCDDATA5                          00000115
LCDDATA6                          00000116
LCDDATA7                          00000117
LCDDATA8                          00000118
LCDDATA9                          00000119
LCDEN                             00000007
LCDIE                             00000004
LCDIF                             00000004
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 54


SYMBOL TABLE
  LABEL                             VALUE 

LCDPS                             00000108
LCDSE0                            0000011C
LCDSE1                            0000011D
LCDSE2                            0000011E
LMUX0                             00000000
LMUX1                             00000001
LP0                               00000000
LP1                               00000001
LP2                               00000002
LP3                               00000003
LTS                               00000001
LVDCON                            00000109
LVDEN                             00000004
LVDIE                             00000002
LVDIF                             00000002
LVDL0                             00000000
LVDL1                             00000001
LVDL2                             00000002
LadeSekundenWert                  00000222
MainParamData                     00000733
MainWaitLoop                      0000008B
MoveToDispBuff                    000000E5
MoveToDispBuff1                   000000EA
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000001
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
NeueTaste                         000003CB
NoIdxReset                        000002B8
NormalDispatchEnd                 000001BF
NormalWeiter                      000001B4
OERR                              00000001
OPTION_REG                        00000081
OSCCON                            0000008F
OSCTUNE                           00000090
OSFIE                             00000007
OSFIF                             00000007
OSTS                              00000003
P                                 00000004
PCL                               00000002
PCLATH                            0000000A
PCLATH_TEMP                       00000021
PCON                              0000008E
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 55


SYMBOL TABLE
  LABEL                             VALUE 

PEIE                              00000006
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PORT_TASTIN                       00000008
PORT_TASTOUT                      00000006
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
R                                 00000002
RBIE                              00000003
RBIF                              00000000
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
READ_WRITE                        00000002
RP0                               00000005
RP1                               00000006
RX9                               00000006
RX9D                              00000000
RX_COUNT                          0000006F
R_W                               00000002
RecByteAvailable                  000001CD
RepeatTaste                       000003C9
S                                 00000003
S0C0                              00000000
S0C1                              00000000
S0C2                              00000000
S0C3                              00000000
S10C0                             00000002
S10C1                             00000002
S10C2                             00000002
S10C3                             00000002
S11C0                             00000003
S11C1                             00000003
S11C2                             00000003
S11C3                             00000003
S12C0                             00000004
S12C1                             00000004
S12C2                             00000004
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 56


SYMBOL TABLE
  LABEL                             VALUE 

S12C3                             00000004
S13C0                             00000005
S13C1                             00000005
S13C2                             00000005
S13C3                             00000005
S14C0                             00000006
S14C1                             00000006
S14C2                             00000006
S14C3                             00000006
S15C0                             00000007
S15C1                             00000007
S15C2                             00000007
S15C3                             00000007
S16C0                             00000000
S16C1                             00000000
S16C2                             00000000
S16C3                             00000000
S17C0                             00000001
S17C1                             00000001
S17C2                             00000001
S17C3                             00000001
S18C0                             00000002
S18C1                             00000002
S18C2                             00000002
S18C3                             00000002
S19C0                             00000003
S19C1                             00000003
S19C2                             00000003
S19C3                             00000003
S1C0                              00000001
S1C1                              00000001
S1C2                              00000001
S1C3                              00000001
S20C0                             00000004
S20C1                             00000004
S20C2                             00000004
S20C3                             00000004
S21C0                             00000005
S21C1                             00000005
S21C2                             00000005
S21C3                             00000005
S22C0                             00000006
S22C1                             00000006
S22C2                             00000006
S22C3                             00000006
S23C0                             00000007
S23C1                             00000007
S23C2                             00000007
S23C3                             00000007
S2C0                              00000002
S2C1                              00000002
S2C2                              00000002
S2C3                              00000002
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 57


SYMBOL TABLE
  LABEL                             VALUE 

S3C0                              00000003
S3C1                              00000003
S3C2                              00000003
S3C3                              00000003
S4C0                              00000004
S4C1                              00000004
S4C2                              00000004
S4C3                              00000004
S5C0                              00000005
S5C1                              00000005
S5C2                              00000005
S5C3                              00000005
S6C0                              00000006
S6C1                              00000006
S6C2                              00000006
S6C3                              00000006
S7C0                              00000007
S7C1                              00000007
S7C2                              00000007
S7C3                              00000007
S8C0                              00000000
S8C1                              00000000
S8C2                              00000000
S8C3                              00000000
S9C0                              00000001
S9C1                              00000001
S9C2                              00000001
S9C3                              00000001
SBOREN                            00000004
SCS                               00000000
SE0                               00000000
SE1                               00000001
SE10                              00000002
SE11                              00000003
SE12                              00000004
SE13                              00000005
SE14                              00000006
SE15                              00000007
SE16                              00000000
SE17                              00000001
SE18                              00000002
SE19                              00000003
SE2                               00000002
SE20                              00000004
SE21                              00000005
SE22                              00000006
SE23                              00000007
SE3                               00000003
SE4                               00000004
SE5                               00000005
SE6                               00000006
SE7                               00000007
SE8                               00000000
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 58


SYMBOL TABLE
  LABEL                             VALUE 

SE9                               00000001
SEG0COM0                          00000000
SEG0COM1                          00000000
SEG0COM2                          00000000
SEG0COM3                          00000000
SEG10COM0                         00000002
SEG10COM1                         00000002
SEG10COM2                         00000002
SEG10COM3                         00000002
SEG11COM0                         00000003
SEG11COM1                         00000003
SEG11COM2                         00000003
SEG11COM3                         00000003
SEG12COM0                         00000004
SEG12COM1                         00000004
SEG12COM2                         00000004
SEG12COM3                         00000004
SEG13COM0                         00000005
SEG13COM1                         00000005
SEG13COM2                         00000005
SEG13COM3                         00000005
SEG14COM0                         00000006
SEG14COM1                         00000006
SEG14COM2                         00000006
SEG14COM3                         00000006
SEG15COM0                         00000007
SEG15COM1                         00000007
SEG15COM2                         00000007
SEG15COM3                         00000007
SEG16COM0                         00000000
SEG16COM1                         00000000
SEG16COM2                         00000000
SEG16COM3                         00000000
SEG17COM0                         00000001
SEG17COM1                         00000001
SEG17COM2                         00000001
SEG17COM3                         00000001
SEG18COM0                         00000002
SEG18COM1                         00000002
SEG18COM2                         00000002
SEG18COM3                         00000002
SEG19COM0                         00000003
SEG19COM1                         00000003
SEG19COM2                         00000003
SEG19COM3                         00000003
SEG1COM0                          00000001
SEG1COM1                          00000001
SEG1COM2                          00000001
SEG1COM3                          00000001
SEG20COM0                         00000004
SEG20COM1                         00000004
SEG20COM2                         00000004
SEG20COM3                         00000004
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 59


SYMBOL TABLE
  LABEL                             VALUE 

SEG21COM0                         00000005
SEG21COM1                         00000005
SEG21COM2                         00000005
SEG21COM3                         00000005
SEG22COM0                         00000006
SEG22COM1                         00000006
SEG22COM2                         00000006
SEG22COM3                         00000006
SEG23COM0                         00000007
SEG23COM1                         00000007
SEG23COM2                         00000007
SEG23COM3                         00000007
SEG2COM0                          00000002
SEG2COM1                          00000002
SEG2COM2                          00000002
SEG2COM3                          00000002
SEG3COM0                          00000003
SEG3COM1                          00000003
SEG3COM2                          00000003
SEG3COM3                          00000003
SEG4COM0                          00000004
SEG4COM1                          00000004
SEG4COM2                          00000004
SEG4COM3                          00000004
SEG5COM0                          00000005
SEG5COM1                          00000005
SEG5COM2                          00000005
SEG5COM3                          00000005
SEG6COM0                          00000006
SEG6COM1                          00000006
SEG6COM2                          00000006
SEG6COM3                          00000006
SEG7COM0                          00000007
SEG7COM1                          00000007
SEG7COM2                          00000007
SEG7COM3                          00000007
SEG8COM0                          00000000
SEG8COM1                          00000000
SEG8COM2                          00000000
SEG8COM3                          00000000
SEG9COM0                          00000001
SEG9COM1                          00000001
SEG9COM2                          00000001
SEG9COM3                          00000001
SEGEN0                            00000000
SEGEN1                            00000001
SEGEN10                           00000002
SEGEN11                           00000003
SEGEN12                           00000004
SEGEN13                           00000005
SEGEN14                           00000006
SEGEN15                           00000007
SEGEN16                           00000000
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 60


SYMBOL TABLE
  LABEL                             VALUE 

SEGEN17                           00000001
SEGEN18                           00000002
SEGEN19                           00000003
SEGEN2                            00000002
SEGEN20                           00000004
SEGEN21                           00000005
SEGEN22                           00000006
SEGEN23                           00000007
SEGEN3                            00000003
SEGEN4                            00000004
SEGEN5                            00000005
SEGEN6                            00000006
SEGEN7                            00000007
SEGEN8                            00000000
SEGEN9                            00000001
SEKUNDEN_COUNT                    0000002F
SEKUNDEN_WERT                     0000002E
SLPEN                             00000006
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
STATUS_TEMP                       0000007F
STX                               00000002
SWDTE                             00000000
SWDTEN                            00000000
SYNC                              00000004
SendNewColor                      00000144
SendToKachel                      000001E4
SubAcc                            000002FD
SubAcc1                           00000306
SubAccRep                         00000330
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1GE                              00000006
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 61


SYMBOL TABLE
  LABEL                             VALUE 

T1GINV                            00000007
T1GSS                             00000001
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TASTBUFF                          00000040
TASTBUFF_IDX                      0000006E
TASTE_AKT                         00000028
TASTE_IDX                         0000002A
TASTE_LAST                        00000029
TEMP                              0000002B
TEMP1                             0000002C
TEMP2                             0000002D
TEMP3                             0000003B
TEMP4                             0000003C
TEMP5                             0000003D
TEMPFLAG                          00000039
TIM1_10MS                         00000022
TIM2_10MS                         00000023
TIMECOUNT                         00000066
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISB                             00000086
TRISC                             00000087
TRISD                             00000088
TRISE                             00000089
TRMT                              00000001
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TX8_9                             00000006
TX9                               00000006
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 62


SYMBOL TABLE
  LABEL                             VALUE 

TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
TastDispatch                      00000234
TastScan                          000003AC
TastScan1                         000003CF
TasteUmsetzen                     00000755
TestHex1                          0000041E
TestHex2                          0000043C
TestHex3                          0000044A
TestHex_0                         0000025C
TestTaste_2                       00000249
TestTaste_3                       0000024F
TestTaste_4                       00000255
TestTaste_5                       0000025B
TestTaste_C                       0000029B
TestTaste_null                    00000270
TestTaste_plus                    00000277
Timer1Int                         00000016
Timer2Int                         00000019
TstScLoop                         000003BB
UA                                00000001
V24Send                           000000DF
VCFG0                             00000005
VCFG1                             00000006
VLCDEN                            00000004
VR0                               00000000
VR1                               00000001
VR2                               00000002
VR3                               00000003
VRCON                             0000009D
VREN                              00000007
VRR                               00000005
VersLoop                          00000075
VersionData                       00000722
W                                 00000000
WA                                00000004
WCOL                              00000007
WDTCON                            00000105
WDTPS0                            00000001
WDTPS1                            00000002
WDTPS2                            00000003
WDTPS3                            00000004
WERR                              00000005
WFT                               00000007
WPU                               00000095
WPU0                              00000000
WPU1                              00000001
WPU2                              00000002
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 63


SYMBOL TABLE
  LABEL                             VALUE 

WPU3                              00000003
WPU4                              00000004
WPU5                              00000005
WPU6                              00000006
WPU7                              00000007
WPUB                              00000095
WPUB0                             00000000
WPUB1                             00000001
WPUB2                             00000002
WPUB3                             00000003
WPUB4                             00000004
WPUB5                             00000005
WPUB6                             00000006
WPUB7                             00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
W_TEMP                            0000007E
Wait10ms                          0000044B
WaitLoop                          0000044D
WaitTxBufferleer                  000000E0
WandleKanal_1                     00000468
WandleKanal_2                     00000475
WandleKanal_3                     00000483
Weiter_FIDX                       000001AB
Z                                 00000002
ZEIT_FidxAktholen                 00000195
ZeroCount                         0000015C
ZeroCountLoop                     0000015F
_BOD_NSLEEP                       00003EFF
_BOD_OFF                          00003CFF
_BOD_ON                           00003FFF
_BOD_SBODEN                       00003DFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003F7F
_CP_OFF                           00003FFF
_CP_ON                            00003FBF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         00002FFF
_EC_OSC                           00003FFB
_EXTRC                            00003FFF
_EXTRCIO                          00003FFE
_EXTRC_OSC_CLKOUT                 00003FFF
_EXTRC_OSC_NOCLKOUT               00003FFE
_FCMEN_OFF                        000037FF
_FCMEN_ON                         00003FFF
_HS_OSC                           00003FFA
_IESO_OFF                         00003BFF
_IESO_ON                          00003FFF
_INTOSC                           00003FFD
_INTOSCIO                         00003FFC
_INTRC_OSC_CLKOUT                 00003FFD
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 64


SYMBOL TABLE
  LABEL                             VALUE 

_INTRC_OSC_NOCLKOUT               00003FFC
_LP_OSC                           00003FF8
_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FEF
_WDT_OFF                          00003FF7
_WDT_ON                           00003FFF
_XT_OSC                           00003FF9
__16F914                          00000001
dAddAcc                           000002EE
dAddAcc1                          000002F6
dSubAcc                           0000030B
dSubAcc1                          00000319
dSubAcc2                          00000321
delay_ms                          0000055E
delay_ms1                         00000560
display                           00000497
display_CB                        000004D3
display_clr                       000004C9
display_init                      000004D8
display_off                       000004C2
display_on                        000004CE
display_write                     000004ED
display_z1                        000004A3
display_z2                        000004A7
display_z3                        000004AB
display_z4                        000004AF
display_zout                      000004B3
display_zout0                     000004BA
dutoa                             0000038D
dutoa1                            00000396
dutoa2                            0000039B
dutoa3                            000003A4
dutoa4                            000003A9
loop_1                            0000002E
lutoa                             00000354
lutoa1                            0000035B
lutoa2                            00000360
lutoa3                            00000368
lutoa4                            0000036D
lutoa5                            00000375
lutoa6                            0000037A
lutoa7                            00000382
lutoa8                            00000387
lutoa_sub                         00000361
main                              00000084
start                             0000002A
sutoa                             0000033A
sutoa1                            0000033F
sutoa2                            00000344
sutoa3                            00000349
sutoa4                            0000034E
MPASM  5.01                      KACHEL_2.ASM   2-2-2006  12:08:24         PAGE 65


SYMBOL TABLE
  LABEL                             VALUE 

wait_15zms                        000000D5
wait_22zms                        000000D4
wait_3ms                          000000D3
wait_750us                        000000D6


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : XX--X---XXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
02C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0300 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0340 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0380 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
03C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0400 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0440 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0480 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
04C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0500 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0540 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXX------------ ----------------
0700 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0740 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXX--------- ----------------
2000 : -------X-------- ---------------- ---------------- ----------------
2100 : XXXXXXXXXXXXXXXX XXXXXXXX-------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:  1478
Program Memory Words Free:  2618


Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :    40 reported,     0 suppressed

